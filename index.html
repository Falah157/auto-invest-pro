<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KANDITHEEM - Live Animated Road Map</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        :root {
            --primary: #2563eb;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --road-color: #4b5563;
            --road-complete: #374151;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        /* Main Layout */
        .dashboard {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            height: 85vh;
        }

        /* Control Panel */
        .control-panel {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .panel-section {
            margin-bottom: 30px;
        }

        .panel-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid #e5e7eb;
        }

        /* Road Map Container */
        .road-map-container {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        #roadMap {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            position: relative;
            background: linear-gradient(45deg, #1e3a8a, #3b82f6);
            background-size: cover;
            background-position: center;
            overflow: hidden;
        }

        /* Animated Road */
        .road {
            position: absolute;
            top: 45%;
            left: 5%;
            right: 5%;
            height: 120px;
            background: var(--road-color);
            border-radius: 60px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .road-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: var(--road-complete);
            border-radius: 60px;
            width: 0%;
            transition: width 1s ease;
        }

        .road-lines {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: repeating-linear-gradient(
                90deg,
                yellow,
                yellow 20px,
                transparent 20px,
                transparent 40px
            );
            transform: translateY(-50%);
            animation: roadLineMove 2s linear infinite;
        }

        @keyframes roadLineMove {
            0% { transform: translateY(-50%) translateX(0); }
            100% { transform: translateY(-50%) translateX(-40px); }
        }

        /* Animated Elements */
        .worker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #f59e0b;
            border-radius: 50%;
            top: 42%;
            animation: workerMove 3s linear infinite;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .worker::before {
            content: 'üë∑';
            position: absolute;
            top: -5px;
            left: 2px;
            font-size: 24px;
        }

        @keyframes workerMove {
            0% { transform: translateX(-50px) translateY(0px); }
            25% { transform: translateX(0px) translateY(-10px); }
            50% { transform: translateX(50px) translateY(0px); }
            75% { transform: translateX(100px) translateY(10px); }
            100% { transform: translateX(150px) translateY(0px); }
        }

        .vehicle {
            position: absolute;
            width: 60px;
            height: 30px;
            background: #ef4444;
            border-radius: 8px;
            top: 48%;
            animation: vehicleMove 8s linear infinite;
            display: none;
        }

        .vehicle::before {
            content: 'üöó';
            position: absolute;
            top: -15px;
            left: 5px;
            font-size: 30px;
        }

        @keyframes vehicleMove {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(1200px); }
        }

        .construction-machine {
            position: absolute;
            width: 80px;
            height: 50px;
            top: 40%;
            animation: machineWork 2s ease-in-out infinite;
        }

        .construction-machine::before {
            content: 'üöú';
            font-size: 40px;
            position: absolute;
        }

        @keyframes machineWork {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(2deg); }
        }

        /* Progress Items */
        .progress-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #f8fafc;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .progress-item:hover {
            transform: translateX(8px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .progress-item.active {
            background: var(--primary);
            color: white;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .progress-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }

        .icon-completed { background: var(--success); color: white; }
        .icon-progress { background: var(--warning); color: white; }
        .icon-delayed { background: var(--danger); color: white; }

        .progress-controls {
            display: flex;
            gap: 8px;
        }

        .progress-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
        }

        .btn-edit { background: #dbeafe; color: var(--primary); }
        .btn-delete { background: #fee2e2; color: var(--danger); }

        /* Progress Slider */
        .progress-slider {
            width: 100%;
            margin: 10px 0;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary), #7c3aed);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* Forms */
        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1em;
        }

        button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        /* Live Activity */
        .live-activity {
            background: #f8fafc;
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .activity-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            font-size: 0.9em;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">KANDITHEEM ISLAND ROAD PROJECT</div>
            <div style="color: #6b7280; font-size: 1.1em;">Live Animated Construction Map - Real-time Worker & Vehicle Tracking</div>
        </div>

        <div class="dashboard">
            <!-- Control Panel -->
            <div class="control-panel">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="completedPercent">54%</div>
                        <div class="stat-label">Road Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeWorkers">8</div>
                        <div class="stat-label">Workers Active</div>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">üèóÔ∏è Road Sections Control</div>
                    <div id="progressList">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">üìç Add New Work Zone</div>
                    <div class="form-group">
                        <label>Zone Name</label>
                        <input type="text" id="zoneName" placeholder="e.g., Beach Road Section">
                    </div>
                    <div class="form-group">
                        <label>Progress Percentage</label>
                        <input type="range" id="zoneProgress" min="0" max="100" value="0" class="progress-slider">
                        <div style="text-align: center; font-weight: bold; color: var(--primary);" id="progressValue">0%</div>
                    </div>
                    <div class="form-group">
                        <label>Workers Assigned</label>
                        <input type="number" id="zoneWorkers" min="0" max="20" value="2" placeholder="Number of workers">
                    </div>
                    <button onclick="addWorkZone()">‚ûï Add Work Zone</button>
                </div>

                <div class="panel-section">
                    <div class="panel-title">üìä Live Activity</div>
                    <div class="live-activity" id="liveActivity">
                        <div class="activity-item">üöú Excavator started working on North Section</div>
                        <div class="activity-item">üë∑ 4 workers assigned to Beach Road</div>
                        <div class="activity-item">üîÑ Progress updated: Main Road 65% complete</div>
                    </div>
                </div>
            </div>

            <!-- Animated Road Map -->
            <div class="road-map-container">
                <div id="roadMap">
                    <!-- Road -->
                    <div class="road">
                        <div class="road-progress" id="roadProgressFill"></div>
                        <div class="road-lines"></div>
                    </div>
                    
                    <!-- Animated elements -->
                    <div class="worker" style="left: 15%;"></div>
                    <div class="worker" style="left: 25%; animation-delay: 0.5s;"></div>
                    <div class="construction-machine" style="left: 40%;"></div>
                    <div class="worker" style="left: 60%; animation-delay: 1s;"></div>
                    <div class="vehicle" id="vehicle1"></div>
                    <div class="vehicle" id="vehicle2" style="animation-delay: 4s;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== ROAD DATA =====
        let roadSections = [
            { 
                id: 1, 
                name: 'North Beach Road', 
                progress: 100, 
                workers: 3,
                position: 20,
                status: 'completed'
            },
            { 
                id: 2, 
                name: 'Main Highway Section', 
                progress: 65, 
                workers: 4,
                position: 40,
                status: 'progress'
            },
            { 
                id: 3, 
                name: 'School Access Road', 
                progress: 30, 
                workers: 2,
                position: 60,
                status: 'progress'
            },
            { 
                id: 4, 
                name: 'Market Connection', 
                progress: 0, 
                workers: 0,
                position: 80,
                status: 'delayed'
            }
        ];

        // ===== INITIALIZATION =====
        function initApp() {
            renderProgressList();
            updateRoadProgress();
            updateAnimations();
            startLiveActivity();
            
            // Initialize progress slider display
            document.getElementById('zoneProgress').addEventListener('input', function() {
                document.getElementById('progressValue').textContent = this.value + '%';
            });
        }

        // ===== PROGRESS LIST RENDERING =====
        function renderProgressList() {
            const container = document.getElementById('progressList');
            
            if (roadSections.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #6b7280; padding: 20px;">No work zones added yet</div>';
                return;
            }
            
            container.innerHTML = roadSections.map(section => `
                <div class="progress-item ${section.status === 'progress' ? 'active' : ''}">
                    <div class="progress-info">
                        <div class="progress-icon icon-${section.status}">
                            ${getStatusIcon(section.status)}
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; font-size: 1.1em;">${section.name}</div>
                            <div style="font-size: 0.9em; opacity: 0.8; margin: 5px 0;">
                                ${section.workers} workers ‚Ä¢ ${section.progress}% complete
                            </div>
                            <input type="range" 
                                   class="progress-slider" 
                                   value="${section.progress}" 
                                   min="0" max="100"
                                   onchange="updateSectionProgress(${section.id}, this.value)"
                                   style="width: 100%;">
                        </div>
                    </div>
                    <div class="progress-controls">
                        <button class="progress-btn btn-edit" onclick="editSection(${section.id})">
                            ‚úèÔ∏è
                        </button>
                        <button class="progress-btn btn-delete" onclick="deleteSection(${section.id})">
                            üóëÔ∏è
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getStatusIcon(status) {
            const icons = {
                'completed': '‚úÖ',
                'progress': 'üîÑ',
                'delayed': '‚ö†Ô∏è'
            };
            return icons[status] || 'üìå';
        }

        // ===== PROGRESS UPDATES =====
        function updateSectionProgress(sectionId, progress) {
            const section = roadSections.find(s => s.id === sectionId);
            if (section) {
                section.progress = parseInt(progress);
                section.status = progress == 100 ? 'completed' : progress > 0 ? 'progress' : 'delayed';
                
                renderProgressList();
                updateRoadProgress();
                updateAnimations();
                addActivity(`Progress updated: ${section.name} ${progress}% complete`);
            }
        }

        function updateRoadProgress() {
            const totalProgress = roadSections.reduce((sum, section) => sum + section.progress, 0) / roadSections.length;
            document.getElementById('roadProgressFill').style.width = totalProgress + '%';
            document.getElementById('completedPercent').textContent = Math.round(totalProgress) + '%';
            
            // Update workers count
            const activeWorkers = roadSections.reduce((sum, section) => sum + section.workers, 0);
            document.getElementById('activeWorkers').textContent = activeWorkers;
        }

        // ===== ANIMATION UPDATES =====
        function updateAnimations() {
            const totalProgress = roadSections.reduce((sum, section) => sum + section.progress, 0) / roadSections.length;
            const vehicles = document.querySelectorAll('.vehicle');
            const workers = document.querySelectorAll('.worker');
            const machines = document.querySelectorAll('.construction-machine');
            
            // Show vehicles only if road is somewhat complete
            if (totalProgress > 70) {
                vehicles.forEach(vehicle => {
                    vehicle.style.display = 'block';
                    vehicle.style.animationPlayState = 'running';
                });
                addActivity('üöó Vehicles started using the completed road sections');
            } else {
                vehicles.forEach(vehicle => {
                    vehicle.style.display = 'none';
                    vehicle.style.animationPlayState = 'paused';
                });
            }
            
            // Update worker count based on actual workers
            const activeWorkers = roadSections.reduce((sum, section) => sum + section.workers, 0);
            
            // Show/hide workers based on active count
            workers.forEach((worker, index) => {
                if (index < Math.min(activeWorkers, 4)) {
                    worker.style.display = 'block';
                    worker.style.animationPlayState = 'running';
                } else {
                    worker.style.display = 'none';
                    worker.style.animationPlayState = 'paused';
                }
            });
            
            // Show machines only if work is in progress
            machines.forEach(machine => {
                if (totalProgress < 90 && totalProgress > 0) {
                    machine.style.display = 'block';
                    machine.style.animationPlayState = 'running';
                } else {
                    machine.style.display = 'none';
                    machine.style.animationPlayState = 'paused';
                }
            });
        }

        // ===== WORK ZONE MANAGEMENT =====
        function addWorkZone() {
            const name = document.getElementById('zoneName').value;
            const progress = parseInt(document.getElementById('zoneProgress').value);
            const workers = parseInt(document.getElementById('zoneWorkers').value);
            
            if (!name) {
                alert('Please enter a zone name');
                return;
            }
            
            const newSection = {
                id: Date.now(),
                name: name,
                progress: progress,
                workers: workers,
                position: Math.random() * 60 + 20, // Random position between 20-80%
                status: progress == 100 ? 'completed' : progress > 0 ? 'progress' : 'delayed'
            };
            
            roadSections.push(newSection);
            renderProgressList();
            updateRoadProgress();
            updateAnimations();
            
            // Clear form
            document.getElementById('zoneName').value = '';
            document.getElementById('zoneProgress').value = 0;
            document.getElementById('progressValue').textContent = '0%';
            document.getElementById('zoneWorkers').value = 2;
            
            addActivity(`üìç New work zone added: ${name} with ${workers} workers`);
        }

        function editSection(sectionId) {
            const section = roadSections.find(s => s.id === sectionId);
            if (section) {
                document.getElementById('zoneName').value = section.name;
                document.getElementById('zoneProgress').value = section.progress;
                document.getElementById('progressValue').textContent = section.progress + '%';
                document.getElementById('zoneWorkers').value = section.workers;
                
                // Remove the section being edited
                roadSections = roadSections.filter(s => s.id !== sectionId);
                renderProgressList();
                updateRoadProgress();
            }
        }

        function deleteSection(sectionId) {
            if (confirm('Are you sure you want to delete this work zone?')) {
                const section = roadSections.find(s => s.id === sectionId);
                roadSections = roadSections.filter(s => s.id !== sectionId);
                renderProgressList();
                updateRoadProgress();
                updateAnimations();
                addActivity(`üóëÔ∏è Work zone removed: ${section.name}`);
            }
        }

        // ===== LIVE ACTIVITY =====
        function startLiveActivity() {
            // Simulate live updates
            setInterval(() => {
                if (Math.random() > 0.7 && roadSections.length > 0) {
                    const activities = [
                        'üë∑ Workers moving to new section',
                        'üöú Excavator preparing ground',
                        'üîÑ Quality check in progress',
                        'üìä Survey team on site',
                        'üõ†Ô∏è Equipment maintenance',
                        'üåßÔ∏è Weather monitoring',
                        'üìù Daily progress report generated'
                    ];
                    addActivity(activities[Math.floor(Math.random() * activities.length)]);
                }
            }, 8000);
        }

        function addActivity(message) {
            const activityContainer = document.getElementById('liveActivity');
            const activityItem = document.createElement('div');
            activityItem.className = 'activity-item';
            activityItem.textContent = message;
            
            activityContainer.insertBefore(activityItem, activityContainer.firstChild);
            
            // Keep only last 8 activities
            while (activityContainer.children.length > 8) {
                activityContainer.removeChild(activityContainer.lastChild);
            }
        }

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });
    </script>
</body>
</html>
