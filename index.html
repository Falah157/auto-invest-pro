<!DOCTYPE html>
<html lang="dv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maldives Bazaar - Marketplace Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #00f3ff;
            --secondary: #ff00ff;
            --accent: #00ff88;
            --danger: #ff0066;
            --warning: #ffcc00;
            --bg-dark: #0a0a1a;
            --card-bg: #1a1a2e;
            --table-header: #2a2a3e;
            --table-row: #1e1e2e;
            --table-alt: #252538;
            --islamic-green: #009688;
        }

        body {
            background: var(--bg-dark);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Side Panels */
        .side-panel {
            width: 320px;
            background: var(--card-bg);
            padding: 15px;
            overflow-y: auto;
            border-right: 2px solid var(--islamic-green);
        }

        .side-panel.right {
            border-right: none;
            border-left: 2px solid var(--islamic-green);
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 15px;
            background: var(--card-bg);
            border-bottom: 2px solid var(--islamic-green);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--islamic-green), var(--primary), var(--islamic-green));
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .logo {
            font-size: 1.8em;
            background: linear-gradient(90deg, var(--islamic-green), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(0, 150, 136, 0.5);
            font-weight: bold;
        }

        .tagline {
            color: #aaa;
            font-size: 0.9em;
        }

        /* Main Feed */
        .main-feed {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: var(--bg-dark);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #333;
            margin-bottom: 15px;
        }

        .card h3 {
            color: var(--islamic-green);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
            font-size: 1.1em;
        }

        /* Forms */
        .form-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
            font-size: 0.9em;
        }

        input, select, button, textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #333;
            background: #2a2a3e;
            color: white;
            font-size: 1em;
        }

        button {
            background: linear-gradient(90deg, var(--islamic-green), #00796b);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 5px;
        }

        button:active {
            transform: scale(0.98);
        }

        .btn-success {
            background: linear-gradient(90deg, var(--accent), #00cc66);
        }

        .btn-warning {
            background: linear-gradient(90deg, var(--warning), #cc9900);
        }

        .btn-danger {
            background: linear-gradient(90deg, var(--danger), #cc0000);
        }

        .btn-small {
            padding: 8px 12px;
            font-size: 0.85em;
            width: auto;
        }

        /* Service Grid */
        .service-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .service-card {
            background: #2a2a3e;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #333;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .service-card:active {
            transform: scale(0.98);
            border-color: var(--islamic-green);
        }

        .service-icon {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: var(--islamic-green);
        }

        .service-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .service-desc {
            font-size: 0.7em;
            color: #aaa;
        }

        /* User Profile */
        .user-profile {
            text-align: center;
            padding: 15px;
            border-bottom: 1px solid #333;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--islamic-green), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            margin: 0 auto 10px;
            color: white;
        }

        .user-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .user-role {
            color: #aaa;
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        .user-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-weight: bold;
            font-size: 1.2em;
            color: var(--islamic-green);
        }

        .stat-label {
            font-size: 0.7em;
            color: #aaa;
        }

        /* Marketplace */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .product-card {
            background: #2a2a3e;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #333;
            transition: all 0.3s;
            cursor: pointer;
        }

        .product-card:active {
            transform: scale(0.98);
            border-color: var(--islamic-green);
        }

        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .product-price {
            color: var(--accent);
            font-weight: bold;
            font-size: 0.9em;
        }

        .product-seller {
            font-size: 0.7em;
            color: #aaa;
        }

        .halal-badge {
            background: var(--islamic-green);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.6em;
            display: inline-block;
            margin-top: 5px;
        }

        /* Status Messages */
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-size: 0.9em;
        }

        .status.success {
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid var(--accent);
        }

        .status.info {
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid var(--primary);
        }

        /* Announcements */
        .announcement-item {
            padding: 12px;
            border-bottom: 1px solid #333;
            font-size: 0.8em;
        }

        .announcement-item:last-child {
            border-bottom: none;
        }

        .announcement-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--islamic-green);
        }

        .announcement-date {
            font-size: 0.7em;
            color: #aaa;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid var(--islamic-green);
            max-width: 500px;
            margin: 0 auto;
        }

        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 15px;
            background: var(--card-bg);
            border-radius: 10px;
            overflow-x: auto;
            padding: 5px;
        }

        .tab {
            padding: 10px 15px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 8px;
            margin: 0 2px;
            flex: 1;
            text-align: center;
            font-size: 0.8em;
        }

        .tab.active {
            background: rgba(0, 150, 136, 0.2);
            border: 1px solid var(--islamic-green);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Login Screen */
        .login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            padding: 20px;
            background: linear-gradient(rgba(10, 10, 26, 0.9), rgba(10, 10, 26, 0.9));
        }

        .login-card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid var(--islamic-green);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .login-logo {
            font-size: 2.5em;
            background: linear-gradient(90deg, var(--islamic-green), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        /* News Feed */
        .news-feed {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .news-post {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #333;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--islamic-green), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .post-user {
            font-weight: bold;
        }

        .post-time {
            font-size: 0.8em;
            color: #aaa;
        }

        .post-content {
            margin-bottom: 10px;
        }

        .post-actions {
            display: flex;
            gap: 15px;
            border-top: 1px solid #333;
            padding-top: 10px;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #aaa;
            cursor: pointer;
        }

        .post-action:hover {
            color: var(--islamic-green);
        }

        /* Create Post */
        .create-post {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .post-input {
            width: 100%;
            min-height: 80px;
            background: #2a2a3e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            color: white;
            margin-bottom: 10px;
            resize: vertical;
        }

        /* Job Listings */
        .job-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .job-card {
            background: #2a2a3e;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #333;
            cursor: pointer;
        }

        .job-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--islamic-green);
        }

        .job-company {
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .job-location {
            font-size: 0.8em;
            color: #aaa;
        }

        /* Service Listings */
        .service-listing {
            background: #2a2a3e;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #333;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .service-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--islamic-green);
        }

        .service-provider {
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .service-price {
            font-size: 0.8em;
            color: var(--accent);
            font-weight: bold;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .side-panel {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid var(--islamic-green);
            }
            
            .side-panel.right {
                border-left: none;
                border-top: 2px solid var(--islamic-green);
            }
            
            .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-card">
            <div class="login-logo">Maldives Bazaar</div>
            <h3>Marketplace Platform</h3>
            
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="text" id="loginEmail" placeholder="Enter your email">
            </div>
            
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password">
            </div>
            
            <button class="btn-success" onclick="login()">
                <i class="fas fa-sign-in-alt"></i> Login to Marketplace
            </button>
            
            <div class="status info" style="margin-top: 15px;">
                <i class="fas fa-info-circle"></i> Join our marketplace community
            </div>
            
            <div style="margin-top: 15px; font-size: 0.9em;">
                <a href="#" onclick="showRegisterModal()" style="color: var(--islamic-green);">Create New Account</a>
            </div>

            <!-- Quick Demo Login -->
            <div style="margin-top: 20px; padding: 15px; background: rgba(0,150,136,0.1); border-radius: 8px;">
                <h4 style="margin-bottom: 10px;">Quick Demo Access:</h4>
                <button class="btn-small" onclick="demoLogin('demo@bazaar.mv', 'demo123')" style="width: 100%; margin-bottom: 5px;">
                    Demo User 1
                </button>
                <button class="btn-small" onclick="demoLogin('ahmed@bazaar.mv', 'ahmed123')" style="width: 100%;">
                    Demo User 2
                </button>
            </div>
        </div>
    </div>

    <!-- Main Platform -->
    <div class="container" id="mainApp" style="display: none;">
        <!-- Left Panel - User Profile & Navigation -->
        <div class="side-panel">
            <!-- User Profile -->
            <div class="user-profile">
                <div class="user-avatar" id="userAvatar">DU</div>
                <div class="user-name" id="userName">Demo User</div>
                <div class="user-role" id="userRole">Seller & Service Provider</div>
                <div class="user-stats">
                    <div class="stat">
                        <div class="stat-value" id="userSales">15</div>
                        <div class="stat-label">Sales</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="userServices">8</div>
                        <div class="stat-label">Services</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="userRating">4.9</div>
                        <div class="stat-label">Rating</div>
                    </div>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="tabs">
                <div class="tab active" onclick="switchMainTab('feed')">Feed</div>
                <div class="tab" onclick="switchMainTab('marketplace')">Marketplace</div>
                <div class="tab" onclick="switchMainTab('services')">Services</div>
                <div class="tab" onclick="switchMainTab('jobs')">Jobs</div>
            </div>

            <!-- Quick Actions -->
            <div class="card">
                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                <div class="service-grid">
                    <div class="service-card" onclick="showAddProductModal()">
                        <div class="service-icon"><i class="fas fa-plus"></i></div>
                        <div class="service-name">Sell Product</div>
                        <div class="service-desc">List new item</div>
                    </div>
                    <div class="service-card" onclick="showAddServiceModal()">
                        <div class="service-icon"><i class="fas fa-tools"></i></div>
                        <div class="service-name">Offer Service</div>
                        <div class="service-desc">Start earning</div>
                    </div>
                    <div class="service-card" onclick="showAddJobModal()">
                        <div class="service-icon"><i class="fas fa-briefcase"></i></div>
                        <div class="service-name">Post Job</div>
                        <div class="service-desc">Hire talent</div>
                    </div>
                    <div class="service-card" onclick="showCreatePostModal()">
                        <div class="service-icon"><i class="fas fa-edit"></i></div>
                        <div class="service-name">Create Post</div>
                        <div class="service-desc">Share update</div>
                    </div>
                </div>
            </div>

            <!-- My Listings -->
            <div class="card">
                <h3><i class="fas fa-list"></i> My Listings</h3>
                <div id="myListings">
                    <!-- User's listings will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="logo">Maldives Bazaar</div>
                <p class="tagline" id="userGreeting">Buy ‚Ä¢ Sell ‚Ä¢ Services ‚Ä¢ Jobs</p>
                <div style="display: flex; gap: 10px; justify-content: center; margin-top: 10px;">
                    <button class="btn-danger btn-small" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>

            <!-- Main Feed -->
            <div class="main-feed">
                <!-- Feed Tab -->
                <div id="feedTab" class="tab-content active">
                    <!-- Create Post -->
                    <div class="create-post">
                        <div class="post-header">
                            <div class="post-avatar" id="currentUserAvatar">DU</div>
                            <div>
                                <div class="post-user" id="currentUserName">Demo User</div>
                                <div class="post-time">What's new?</div>
                            </div>
                        </div>
                        <textarea class="post-input" id="postContent" placeholder="Share what's happening in your business..."></textarea>
                        <button class="btn-success" onclick="createPost()">
                            <i class="fas fa-paper-plane"></i> Post Update
                        </button>
                    </div>

                    <!-- News Feed -->
                    <div class="news-feed" id="newsFeed">
                        <!-- Posts will be loaded here -->
                    </div>
                </div>

                <!-- Marketplace Tab -->
                <div id="marketplaceTab" class="tab-content">
                    <div class="card">
                        <h3><i class="fas fa-store"></i> Marketplace</h3>
                        <div class="form-group">
                            <input type="text" id="productSearch" placeholder="Search products..." onkeyup="filterProducts()">
                        </div>
                        <div class="product-grid" id="marketplaceProducts">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Services Tab -->
                <div id="servicesTab" class="tab-content">
                    <div class="card">
                        <h3><i class="fas fa-concierge-bell"></i> Services</h3>
                        <div class="form-group">
                            <input type="text" id="serviceSearch" placeholder="Search services..." onkeyup="filterServices()">
                        </div>
                        <div id="servicesList">
                            <!-- Services will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Jobs Tab -->
                <div id="jobsTab" class="tab-content">
                    <div class="card">
                        <h3><i class="fas fa-briefcase"></i> Job Market</h3>
                        <div class="form-group">
                            <input type="text" id="jobSearch" placeholder="Search jobs..." onkeyup="filterJobs()">
                        </div>
                        <div class="job-grid" id="jobsList">
                            <!-- Jobs will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Community & Trends -->
        <div class="side-panel right">
            <div class="card">
                <h3><i class="fas fa-fire"></i> Trending Products</h3>
                <div id="trendingProducts">
                    <!-- Trending products will be loaded here -->
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-chart-line"></i> Marketplace Stats</h3>
                <div class="result-item">
                    <span>Active Users:</span>
                    <span>2,458</span>
                </div>
                <div class="result-item">
                    <span>Products Listed:</span>
                    <span>1,847</span>
                </div>
                <div class="result-item">
                    <span>Services Offered:</span>
                    <span>892</span>
                </div>
                <div class="result-item">
                    <span>Jobs Available:</span>
                    <span>156</span>
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-users"></i> Top Sellers</h3>
                <div id="topSellers">
                    <!-- Top sellers will be loaded here -->
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-gem"></i> Premium Features</h3>
                <div class="service-grid">
                    <div class="service-card" onclick="showFeature('verified_badge')">
                        <div class="service-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="service-name">Verified Badge</div>
                        <div class="service-desc">Build trust</div>
                    </div>
                    <div class="service-card" onclick="showFeature('premium_listing')">
                        <div class="service-icon"><i class="fas fa-crown"></i></div>
                        <div class="service-name">Premium Listing</div>
                        <div class="service-desc">More visibility</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <h3><i class="fas fa-user-plus"></i> Join Marketplace</h3>
            <div class="form-group">
                <label for="regName">Full Name</label>
                <input type="text" id="regName" placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label for="regEmail">Email</label>
                <input type="email" id="regEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="regPhone">Phone Number</label>
                <input type="text" id="regPhone" placeholder="Enter your phone">
            </div>
            <div class="form-group">
                <label for="regPassword">Password</label>
                <input type="password" id="regPassword" placeholder="Create a password">
            </div>
            <div class="form-group">
                <label for="regIsland">Home Island</label>
                <select id="regIsland">
                    <option value="male">Mal√©</option>
                    <option value="addu">Addu City</option>
                    <option value="fuvahmulah">Fuvahmulah</option>
                    <option value="other">Other Island</option>
                </select>
            </div>
            <div class="form-group">
                <label for="regUserType">I want to:</label>
                <select id="regUserType">
                    <option value="buyer">Buy products/services</option>
                    <option value="seller">Sell products</option>
                    <option value="service">Offer services</option>
                    <option value="both">All of the above</option>
                </select>
            </div>
            <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-success" onclick="registerUser()">
                    <i class="fas fa-user-plus"></i> Join Now
                </button>
                <button class="btn-warning" onclick="closeRegisterModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <h3><i class="fas fa-plus-circle"></i> Sell Product</h3>
            <div class="form-group">
                <label for="productName">Product Name</label>
                <input type="text" id="productName" placeholder="Enter product name">
            </div>
            <div class="form-group">
                <label for="productDescription">Description</label>
                <textarea id="productDescription" rows="3" placeholder="Describe your product"></textarea>
            </div>
            <div class="form-group">
                <label for="productPrice">Price (MVR)</label>
                <input type="number" id="productPrice" placeholder="Enter price">
            </div>
            <div class="form-group">
                <label for="productCategory">Category</label>
                <select id="productCategory">
                    <option value="food">Food & Beverages</option>
                    <option value="handicrafts">Handicrafts</option>
                    <option value="fishing">Fishing Equipment</option>
                    <option value="clothing">Clothing</option>
                    <option value="electronics">Electronics</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="productLocation">Location/Island</label>
                <select id="productLocation">
                    <option value="male">Mal√©</option>
                    <option value="addu">Addu City</option>
                    <option value="fuvahmulah">Fuvahmulah</option>
                    <option value="other">Other Island</option>
                </select>
            </div>
            <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-success" onclick="addProduct()">
                    <i class="fas fa-save"></i> List Product
                </button>
                <button class="btn-warning" onclick="closeAddProductModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Add Service Modal -->
    <div class="modal" id="addServiceModal">
        <div class="modal-content">
            <h3><i class="fas fa-tools"></i> Offer Service</h3>
            <div class="form-group">
                <label for="serviceName">Service Name</label>
                <input type="text" id="serviceName" placeholder="Enter service name">
            </div>
            <div class="form-group">
                <label for="serviceDescription">Description</label>
                <textarea id="serviceDescription" rows="3" placeholder="Describe your service"></textarea>
            </div>
            <div class="form-group">
                <label for="servicePrice">Price (MVR)</label>
                <input type="number" id="servicePrice" placeholder="Enter price or 'Contact for quote'">
            </div>
            <div class="form-group">
                <label for="serviceCategory">Category</label>
                <select id="serviceCategory">
                    <option value="repair">Repair & Maintenance</option>
                    <option value="cleaning">Cleaning Services</option>
                    <option value="transport">Transportation</option>
                    <option value="education">Education & Tutoring</option>
                    <option value="health">Health & Wellness</option>
                    <option value="other">Other Service</option>
                </select>
            </div>
            <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-success" onclick="addService()">
                    <i class="fas fa-save"></i> Offer Service
                </button>
                <button class="btn-warning" onclick="closeAddServiceModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Add Job Modal -->
    <div class="modal" id="addJobModal">
        <div class="modal-content">
            <h3><i class="fas fa-briefcase"></i> Post Job</h3>
            <div class="form-group">
                <label for="jobTitle">Job Title</label>
                <input type="text" id="jobTitle" placeholder="Enter job title">
            </div>
            <div class="form-group">
                <label for="jobDescription">Job Description</label>
                <textarea id="jobDescription" rows="3" placeholder="Describe the job position"></textarea>
            </div>
            <div class="form-group">
                <label for="jobSalary">Salary (MVR)</label>
                <input type="text" id="jobSalary" placeholder="Enter salary or 'Negotiable'">
            </div>
            <div class="form-group">
                <label for="jobLocation">Location</label>
                <select id="jobLocation">
                    <option value="male">Mal√©</option>
                    <option value="addu">Addu City</option>
                    <option value="fuvahmulah">Fuvahmulah</option>
                    <option value="remote">Remote</option>
                    <option value="other">Other Location</option>
                </select>
            </div>
            <div class="form-group">
                <label for="jobType">Job Type</label>
                <select id="jobType">
                    <option value="fulltime">Full Time</option>
                    <option value="parttime">Part Time</option>
                    <option value="contract">Contract</option>
                    <option value="freelance">Freelance</option>
                </select>
            </div>
            <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-success" onclick="addJob()">
                    <i class="fas fa-save"></i> Post Job
                </button>
                <button class="btn-warning" onclick="closeAddJobModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <script>
        // Platform data and state
        let currentUser = null;
        let users = [];
        let products = [];
        let services = [];
        let jobs = [];
        let posts = [];

        // Initialize the platform
        function initApp() {
            loadSampleData();
            updateUserProfile();
            loadMarketplace();
            loadServices();
            loadJobs();
            loadNewsFeed();
            loadMyListings();
            loadTrendingProducts();
            loadTopSellers();
        }

        // Load sample data with pre-created demo users
        function loadSampleData() {
            // Pre-created demo users
            users = [
                {
                    id: 1,
                    name: "Demo User",
                    email: "demo@bazaar.mv",
                    password: "demo123",
                    type: "both",
                    island: "male",
                    avatar: "DU",
                    sales: 15,
                    services: 8,
                    rating: 4.9,
                    joinDate: "Jan 2023"
                },
                {
                    id: 2,
                    name: "Ahmed Mohamed",
                    email: "ahmed@bazaar.mv",
                    password: "ahmed123",
                    type: "both",
                    island: "male",
                    avatar: "AM",
                    sales: 12,
                    services: 5,
                    rating: 4.8,
                    joinDate: "Feb 2023"
                },
                {
                    id: 3,
                    name: "Aisha Ali",
                    email: "aisha@bazaar.mv",
                    password: "aisha123",
                    type: "service",
                    island: "addu",
                    avatar: "AA",
                    sales: 0,
                    services: 12,
                    rating: 4.9,
                    joinDate: "Mar 2023"
                }
            ];

            // Sample products
            products = [
                {
                    id: 1,
                    name: "Fresh Tuna - 5kg",
                    price: 425,
                    seller: "Demo User",
                    sellerId: 1,
                    description: "Freshly caught tuna from the Maldives waters, perfect for family meals",
                    category: "food",
                    location: "male",
                    image: "üêü",
                    stock: 3,
                    rating: 4.7
                },
                {
                    id: 2,
                    name: "Handmade Prayer Mats",
                    price: 120,
                    seller: "Ahmed Mohamed",
                    sellerId: 2,
                    description: "Beautiful handmade prayer mats with traditional Maldivian designs",
                    category: "handicrafts",
                    location: "male",
                    image: "üß∂",
                    stock: 8,
                    rating: 4.9
                },
                {
                    id: 3,
                    name: "Organic Coconut Oil 1L",
                    price: 65,
                    seller: "Demo User",
                    sellerId: 1,
                    description: "Pure organic coconut oil extracted using traditional methods",
                    category: "food",
                    location: "male",
                    image: "ü••",
                    stock: 20,
                    rating: 4.5
                }
            ];

            // Sample services
            services = [
                {
                    id: 1,
                    name: "Boat Engine Repair",
                    price: "Contact for quote",
                    provider: "Ahmed Mohamed",
                    providerId: 2,
                    description: "Professional boat engine repair and maintenance services",
                    category: "repair",
                    location: "male",
                    rating: 4.8
                },
                {
                    id: 2,
                    name: "Home Cleaning Service",
                    price: 250,
                    provider: "Aisha Ali",
                    providerId: 3,
                    description: "Thorough home cleaning with eco-friendly products",
                    category: "cleaning",
                    location: "addu",
                    rating: 4.9
                },
                {
                    id: 3,
                    name: "Quran Tutoring",
                    price: 100,
                    provider: "Demo User",
                    providerId: 1,
                    description: "Learn Quran recitation and Tajweed for all ages",
                    category: "education",
                    location: "male",
                    rating: 5.0
                }
            ];

            // Sample jobs
            jobs = [
                {
                    id: 1,
                    title: "Fishing Boat Crew",
                    company: "Ocean Harvest Co.",
                    salary: "3,500 MVR",
                    description: "Join our fishing crew for daily fishing trips. Experience preferred.",
                    location: "male",
                    type: "fulltime",
                    postedBy: 2,
                    date: "2 days ago"
                },
                {
                    id: 2,
                    title: "Handicraft Artisan",
                    company: "Maldivian Crafts",
                    salary: "Negotiable",
                    description: "Skilled artisan needed for traditional Maldivian handicrafts",
                    location: "addu",
                    type: "parttime",
                    postedBy: 3,
                    date: "1 week ago"
                },
                {
                    id: 3,
                    title: "Marketplace Support",
                    company: "Maldives Bazaar",
                    salary: "4,200 MVR",
                    description: "Help users with platform questions and technical support",
                    location: "remote",
                    type: "fulltime",
                    postedBy: 1,
                    date: "3 days ago"
                }
            ];

            // Sample posts
            posts = [
                {
                    id: 1,
                    userId: 1,
                    userName: "Demo User",
                    userAvatar: "DU",
                    content: "Just listed fresh tuna catch from this morning! Perfect for family dinners. DM for bulk orders! üêü",
                    timestamp: "2 hours ago",
                    likes: 12,
                    comments: 3
                },
                {
                    id: 2,
                    userId: 2,
                    userName: "Ahmed Mohamed",
                    userAvatar: "AM",
                    content: "Available for boat engine repairs this week. Special discount for first-time customers! ‚öôÔ∏èüõ•Ô∏è",
                    timestamp: "5 hours ago",
                    likes: 8,
                    comments: 2
                },
                {
                    id: 3,
                    userId: 3,
                    userName: "Aisha Ali",
                    userAvatar: "AA",
                    content: "New cleaning service packages available! Book your spring cleaning now. Eco-friendly products used. üè†‚ú®",
                    timestamp: "1 day ago",
                    likes: 15,
                    comments: 5
                }
            ];
        }

        // Login function
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'flex';
                document.getElementById('userGreeting').textContent = `Welcome to Maldives Bazaar, ${user.name}`;
                
                initApp();
                addLog(`User ${user.name} logged in`, 'info');
            } else {
                alert('Invalid login credentials. Please try again or use demo accounts.');
            }
        }

        // Demo login function
        function demoLogin(email, password) {
            document.getElementById('loginEmail').value = email;
            document.getElementById('loginPassword').value = password;
            login();
        }

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Update user profile display
        function updateUserProfile() {
            if (!currentUser) return;
            
            document.getElementById('userAvatar').textContent = currentUser.avatar;
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = 
                currentUser.type === 'both' ? 'Seller & Service Provider' : 
                currentUser.type === 'buyer' ? 'Buyer' : 
                currentUser.type === 'seller' ? 'Seller' : 'Service Provider';
            document.getElementById('userSales').textContent = currentUser.sales;
            document.getElementById('userServices').textContent = currentUser.services;
            document.getElementById('userRating').textContent = currentUser.rating;
            
            // Update current user in post creation
            document.getElementById('currentUserAvatar').textContent = currentUser.avatar;
            document.getElementById('currentUserName').textContent = currentUser.name;
        }

        // Switch main tabs
        function switchMainTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to clicked tab
            event.currentTarget.classList.add('active');
        }

        // Load marketplace products
        function loadMarketplace() {
            const container = document.getElementById('marketplaceProducts');
            
            container.innerHTML = products.map(product => `
                <div class="product-card" onclick="viewProduct(${product.id})">
                    <div style="font-size: 2em; text-align: center; margin-bottom: 10px;">${product.image}</div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">MVR ${product.price}</div>
                    <div class="product-seller">${product.seller}</div>
                    <div class="halal-badge">‚≠ê ${product.rating}</div>
                </div>
            `).join('');
        }

        // Load services
        function loadServices() {
            const container = document.getElementById('servicesList');
            
            container.innerHTML = services.map(service => `
                <div class="service-listing" onclick="viewService(${service.id})">
                    <div class="service-title">${service.name}</div>
                    <div class="service-provider">by ${service.provider}</div>
                    <div class="service-price">${service.price}</div>
                    <div class="halal-badge">‚≠ê ${service.rating}</div>
                </div>
            `).join('');
        }

        // Load jobs
        function loadJobs() {
            const container = document.getElementById('jobsList');
            
            container.innerHTML = jobs.map(job => `
                <div class="job-card" onclick="viewJob(${job.id})">
                    <div class="job-title">${job.title}</div>
                    <div class="job-company">${job.company}</div>
                    <div class="job-location">üìç ${job.location} ‚Ä¢ üí∞ ${job.salary}</div>
                    <div class="halal-badge">${job.type}</div>
                </div>
            `).join('');
        }

        // Load news feed
        function loadNewsFeed() {
            const container = document.getElementById('newsFeed');
            
            container.innerHTML = posts.map(post => `
                <div class="news-post">
                    <div class="post-header">
                        <div class="post-avatar">${post.userAvatar}</div>
                        <div>
                            <div class="post-user">${post.userName}</div>
                            <div class="post-time">${post.timestamp}</div>
                        </div>
                    </div>
                    <div class="post-content">${post.content}</div>
                    <div class="post-actions">
                        <div class="post-action" onclick="likePost(${post.id})">
                            <i class="fas fa-heart"></i> ${post.likes}
                        </div>
                        <div class="post-action" onclick="commentOnPost(${post.id})">
                            <i class="fas fa-comment"></i> ${post.comments}
                        </div>
                        <div class="post-action" onclick="sharePost(${post.id})">
                            <i class="fas fa-share"></i> Share
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load user's listings
        function loadMyListings() {
            const container = document.getElementById('myListings');
            const userProducts = products.filter(p => p.sellerId === currentUser.id);
            const userServices = services.filter(s => s.providerId === currentUser.id);
            
            let listingsHTML = '';
            
            if (userProducts.length === 0 && userServices.length === 0) {
                listingsHTML = '<div class="status info">No listings yet</div>';
            } else {
                userProducts.forEach(product => {
                    listingsHTML += `
                        <div class="announcement-item">
                            <div class="announcement-title">${product.name}</div>
                            <div class="service-desc">MVR ${product.price} ‚Ä¢ ${product.stock} left</div>
                        </div>
                    `;
                });
                
                userServices.forEach(service => {
                    listingsHTML += `
                        <div class="announcement-item">
                            <div class="announcement-title">${service.name}</div>
                            <div class="service-desc">${service.price}</div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = listingsHTML;
        }

        // Load trending products
        function loadTrendingProducts() {
            const container = document.getElementById('trendingProducts');
            const trending = products.slice(0, 3);
            
            container.innerHTML = trending.map(product => `
                <div class="announcement-item">
                    <div class="announcement-title">${product.name}</div>
                    <div class="service-desc">MVR ${product.price} ‚Ä¢ ‚≠ê ${product.rating}</div>
                </div>
            `).join('');
        }

        // Load top sellers
        function loadTopSellers() {
            const container = document.getElementById('topSellers');
            const topSellers = users.slice(0, 3);
            
            container.innerHTML = topSellers.map(user => `
                <div class="announcement-item">
                    <div class="announcement-title">${user.name}</div>
                    <div class="service-desc">${user.sales} sales ‚Ä¢ ‚≠ê ${user.rating}</div>
                </div>
            `).join('');
        }

        // Show register modal
        function showRegisterModal() {
            document.getElementById('registerModal').style.display = 'block';
        }

        // Close register modal
        function closeRegisterModal() {
            document.getElementById('registerModal').style.display = 'none';
        }

        // Register new user
        function registerUser() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const island = document.getElementById('regIsland').value;
            const userType = document.getElementById('regUserType').value;
            
            if (!name || !email || !password) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Check if user already exists
            if (users.find(u => u.email === email)) {
                alert('User with this email already exists. Please login instead.');
                return;
            }
            
            // Create new user
            const newUser = {
                id: users.length + 1,
                name: name,
                email: email,
                password: password,
                type: userType,
                island: island,
                avatar: name.split(' ').map(n => n[0]).join('').toUpperCase(),
                sales: 0,
                services: 0,
                rating: 0,
                joinDate: new Date().toLocaleDateString('en-US', { month: 'short', year: 'numeric' })
            };
            
            users.push(newUser);
            
            alert('Account created successfully! You can now login with your credentials.');
            closeRegisterModal();
            
            // Auto-fill login form
            document.getElementById('loginEmail').value = email;
            document.getElementById('loginPassword').value = password;
        }

        // Show add product modal
        function showAddProductModal() {
            document.getElementById('addProductModal').style.display = 'block';
        }

        // Close add product modal
        function closeAddProductModal() {
            document.getElementById('addProductModal').style.display = 'none';
        }

        // Add new product
        function addProduct() {
            const name = document.getElementById('productName').value;
            const description = document.getElementById('productDescription').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const category = document.getElementById('productCategory').value;
            const location = document.getElementById('productLocation').value;
            
            if (!name || !description || !price) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Create new product
            const newProduct = {
                id: products.length + 1,
                name: name,
                price: price,
                seller: currentUser.name,
                sellerId: currentUser.id,
                description: description,
                category: category,
                location: location,
                image: getProductEmoji(category),
                stock: 1,
                rating: 0
            };
            
            products.push(newProduct);
            currentUser.sales++;
            
            alert('Product listed successfully!');
            closeAddProductModal();
            loadMarketplace();
            loadMyListings();
        }

        // Show add service modal
        function showAddServiceModal() {
            document.getElementById('addServiceModal').style.display = 'block';
        }

        // Close add service modal
        function closeAddServiceModal() {
            document.getElementById('addServiceModal').style.display = 'none';
        }

        // Add new service
        function addService() {
            const name = document.getElementById('serviceName').value;
            const description = document.getElementById('serviceDescription').value;
            const price = document.getElementById('servicePrice').value;
            const category = document.getElementById('serviceCategory').value;
            
            if (!name || !description || !price) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Create new service
            const newService = {
                id: services.length + 1,
                name: name,
                price: price,
                provider: currentUser.name,
                providerId: currentUser.id,
                description: description,
                category: category,
                location: currentUser.island,
                rating: 0
            };
            
            services.push(newService);
            currentUser.services++;
            
            alert('Service offered successfully!');
            closeAddServiceModal();
            loadServices();
            loadMyListings();
        }

        // Show add job modal
        function showAddJobModal() {
            document.getElementById('addJobModal').style.display = 'block';
        }

        // Close add job modal
        function closeAddJobModal() {
            document.getElementById('addJobModal').style.display = 'none';
        }

        // Add new job
        function addJob() {
            const title = document.getElementById('jobTitle').value;
            const description = document.getElementById('jobDescription').value;
            const salary = document.getElementById('jobSalary').value;
            const location = document.getElementById('jobLocation').value;
            const type = document.getElementById('jobType').value;
            
            if (!title || !description || !salary) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Create new job
            const newJob = {
                id: jobs.length + 1,
                title: title,
                company: currentUser.name,
                salary: salary,
                description: description,
                location: location,
                type: type,
                postedBy: currentUser.id,
                date: "Just now"
            };
            
            jobs.push(newJob);
            
            alert('Job posted successfully!');
            closeAddJobModal();
            loadJobs();
        }

        // Create post
        function createPost() {
            const content = document.getElementById('postContent').value;
            
            if (!content) {
                alert('Please write something to post');
                return;
            }
            
            // Create new post
            const newPost = {
                id: posts.length + 1,
                userId: currentUser.id,
                userName: currentUser.name,
                userAvatar: currentUser.avatar,
                content: content,
                timestamp: "Just now",
                likes: 0,
                comments: 0
            };
            
            posts.unshift(newPost); // Add to beginning
            document.getElementById('postContent').value = '';
            
            loadNewsFeed();
            alert('Post published!');
        }

        // Get emoji for product category
        function getProductEmoji(category) {
            const emojis = {
                'food': 'üçΩÔ∏è',
                'handicrafts': 'üßµ',
                'fishing': 'üé£',
                'clothing': 'üëï',
                'electronics': 'üì±',
                'other': 'üì¶'
            };
            return emojis[category] || 'üì¶';
        }

        // View product details
        function viewProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                alert(`Product: ${product.name}\nPrice: MVR ${product.price}\nSeller: ${product.seller}\nDescription: ${product.description}\nLocation: ${product.location}`);
            }
        }

        // View service details
        function viewService(serviceId) {
            const service = services.find(s => s.id === serviceId);
            if (service) {
                alert(`Service: ${service.name}\nPrice: ${service.price}\nProvider: ${service.provider}\nDescription: ${service.description}\nLocation: ${service.location}`);
            }
        }

        // View job details
        function viewJob(jobId) {
            const job = jobs.find(j => j.id === jobId);
            if (job) {
                alert(`Job: ${job.title}\nCompany: ${job.company}\nSalary: ${job.salary}\nLocation: ${job.location}\nType: ${job.type}\nDescription: ${job.description}`);
            }
        }

        // Post interactions
        function likePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.likes++;
                loadNewsFeed();
            }
        }

        function commentOnPost(postId) {
            const comment = prompt('Write your comment:');
            if (comment) {
                const post = posts.find(p => p.id === postId);
                if (post) {
                    post.comments++;
                    loadNewsFeed();
                    alert('Comment added!');
                }
            }
        }

        function sharePost(postId) {
            alert('Post shared to your network!');
        }

        // Filter functions
        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const productCards = document.querySelectorAll('#marketplaceProducts .product-card');
            
            productCards.forEach(card => {
                const name = card.querySelector('.product-name').textContent.toLowerCase();
                if (name.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function filterServices() {
            const searchTerm = document.getElementById('serviceSearch').value.toLowerCase();
            const serviceListings = document.querySelectorAll('#servicesList .service-listing');
            
            serviceListings.forEach(listing => {
                const name = listing.querySelector('.service-title').textContent.toLowerCase();
                if (name.includes(searchTerm)) {
                    listing.style.display = 'block';
                } else {
                    listing.style.display = 'none';
                }
            });
        }

        function filterJobs() {
            const searchTerm = document.getElementById('jobSearch').value.toLowerCase();
            const jobCards = document.querySelectorAll('#jobsList .job-card');
            
            jobCards.forEach(card => {
                const title = card.querySelector('.job-title').textContent.toLowerCase();
                if (title.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Show feature
        function showFeature(feature) {
            const features = {
                'verified_badge': 'Verified Badge - Build trust with customers',
                'premium_listing': 'Premium Listing - Get more visibility for your listings'
            };
            alert(features[feature] || 'Premium feature');
        }

        // Show create post modal
        function showCreatePostModal() {
            document.getElementById('postContent').focus();
        }

        // Add entry to system log
        function addLog(message, type) {
            console.log(`[${new Date().toLocaleTimeString()}] ${message}`);
        }

        // Initialize the platform when page loads
        window.addEventListener('load', () => {
            addLog('Maldives Bazaar platform loaded', 'info');
        });
    </script>
</body>
</html>
