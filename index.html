<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetailPOS - Point of Sale System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4a6bff;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --bg-light: #f8f9fa;
            --card-bg: #ffffff;
            --text-dark: #333333;
            --border: #dee2e6;
        }

        body {
            background: var(--bg-light);
            color: var(--text-dark);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary);
        }

        .logo {
            font-size: 2.5em;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }

        .card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-weight: 500;
        }

        input, select, button {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid var(--border);
            background: white;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 107, 255, 0.4);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-warning {
            background: var(--warning);
            color: var(--text-dark);
        }

        .btn-danger {
            background: var(--danger);
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }

        .status.success {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid var(--success);
        }

        .status.error {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid var(--danger);
        }

        .status.info {
            background: rgba(74, 107, 255, 0.2);
            border: 1px solid var(--primary);
        }

        .price-display {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }

        .positive {
            color: var(--success);
        }

        .negative {
            color: var(--danger);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .product {
            padding: 15px 10px;
            text-align: center;
            border: 1px solid var(--border);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .product:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product.active {
            background: rgba(74, 107, 255, 0.1);
            border-color: var(--primary);
        }

        .product img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 8px;
        }

        .log {
            background: white;
            padding: 15px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            margin-top: 15px;
            border: 1px solid var(--border);
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 3px;
        }

        .log-success {
            background: rgba(40, 167, 69, 0.1);
            border-left: 3px solid var(--success);
        }

        .log-error {
            background: rgba(220, 53, 69, 0.1);
            border-left: 3px solid var(--danger);
        }

        .log-info {
            background: rgba(74, 107, 255, 0.1);
            border-left: 3px solid var(--primary);
        }

        .balance-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .balance-item {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid var(--border);
        }

        .cart {
            margin-top: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid var(--border);
        }

        .cart-total {
            font-weight: bold;
            font-size: 1.2em;
            text-align: right;
            padding: 10px;
            margin-top: 10px;
            border-top: 2px solid var(--primary);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .payment-method {
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method.active {
            background: rgba(74, 107, 255, 0.1);
            border-color: var(--primary);
        }

        .receipt {
            background: white;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            border: 1px dashed var(--border);
            font-family: monospace;
            white-space: pre-line;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-cash-register"></i>
                RetailPOS
            </div>
            <p>Point of Sale System - Fast & Efficient Checkout</p>
        </div>

        <!-- System Status -->
        <div class="card">
            <h3><i class="fas fa-plug"></i> System Status</h3>
            <div id="systemStatus" class="status info">
                ðŸ”„ Initializing system...
            </div>
            <div class="product-grid" id="productCategories">
                <!-- Product categories will be loaded here -->
            </div>
        </div>

        <div class="dashboard">
            <!-- Products & Cart -->
            <div class="card">
                <h3><i class="fas fa-shopping-cart"></i> Products & Cart</h3>
                <div class="two-column">
                    <div>
                        <div class="form-group">
                            <label for="productSearch">Search Product:</label>
                            <input type="text" id="productSearch" placeholder="Enter product name or barcode">
                        </div>
                        <div class="product-grid" id="productsList">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                    <div>
                        <h4>Current Sale</h4>
                        <div id="cartItems">
                            <div class="status info">Cart is empty</div>
                        </div>
                        <div class="cart-total" id="cartTotal">Total: $0.00</div>
                        
                        <div class="payment-methods" id="paymentMethods">
                            <!-- Payment methods will be loaded here -->
                        </div>
                        
                        <button onclick="processPayment()" class="btn-success" id="processPaymentBtn">
                            <i class="fas fa-credit-card"></i> Process Payment
                        </button>
                        <button onclick="clearCart()" class="btn-warning">
                            <i class="fas fa-trash"></i> Clear Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div>
                <!-- Customer & Transaction Info -->
                <div class="card">
                    <h3><i class="fas fa-user"></i> Customer Information</h3>
                    <div class="form-group">
                        <label for="customerPhone">Customer Phone:</label>
                        <input type="text" id="customerPhone" placeholder="Enter phone number">
                    </div>
                    <div class="form-group">
                        <label for="customerName">Customer Name:</label>
                        <input type="text" id="customerName" placeholder="Enter customer name">
                    </div>
                    <button onclick="applyDiscount()" class="btn-warning">
                        <i class="fas fa-tag"></i> Apply Discount (10%)
                    </button>
                </div>

                <!-- Today's Summary -->
                <div class="card">
                    <h3><i class="fas fa-chart-bar"></i> Today's Summary</h3>
                    <div id="dailySummary">
                        <div class="balance-display">
                            <div class="balance-item">
                                <div>Total Sales</div>
                                <div id="totalSales">$0.00</div>
                            </div>
                            <div class="balance-item">
                                <div>Transactions</div>
                                <div id="transactionCount">0</div>
                            </div>
                        </div>
                        <div class="status info">No transactions today</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                    <button onclick="openCashDrawer()" class="btn-warning">
                        <i class="fas fa-donate"></i> Open Cash Drawer
                    </button>
                    <button onclick="printLastReceipt()" class="btn-warning">
                        <i class="fas fa-print"></i> Reprint Last Receipt
                    </button>
                    <button onclick="voidTransaction()" class="btn-danger">
                        <i class="fas fa-times-circle"></i> Void Transaction
                    </button>
                </div>
            </div>
        </div>

        <!-- Transaction Log -->
        <div class="card">
            <h3><i class="fas fa-receipt"></i> Transaction Log</h3>
            <div class="log" id="transactionLog"></div>
        </div>

        <!-- Receipt Preview -->
        <div class="card">
            <h3><i class="fas fa-receipt"></i> Receipt Preview</h3>
            <div class="receipt" id="receiptPreview">
                === RETAIL POS RECEIPT ===
                
                No transaction yet
                
                ========================
            </div>
        </div>
    </div>

    <script>
        // POS System Core
        class RetailPOS {
            constructor() {
                this.currentCategory = 'all';
                this.cart = [];
                this.transactions = [];
                this.products = [];
                this.selectedPaymentMethod = 'cash';
                this.dailyStats = {
                    totalSales: 0,
                    transactionCount: 0
                };
                
                this.initializePOS();
            }

            async initializePOS() {
                this.addLog('ðŸš€ RetailPOS System Initializing...', 'info');
                
                // Load product categories
                this.loadProductCategories();
                
                // Load products
                this.loadProducts();
                
                // Load payment methods
                this.loadPaymentMethods();
                
                // Initialize with demo data
                this.simulateDailyStats();
                
                this.addLog('âœ… POS System ready for transactions', 'success');
                this.updateStatus('âœ… System ready', 'success');
            }

            loadProductCategories() {
                const categories = [
                    { id: 'all', name: 'All Products', icon: 'fas fa-boxes' },
                    { id: 'electronics', name: 'Electronics', icon: 'fas fa-laptop' },
                    { id: 'clothing', name: 'Clothing', icon: 'fas fa-tshirt' },
                    { id: 'food', name: 'Food & Drinks', icon: 'fas fa-utensils' },
                    { id: 'home', name: 'Home & Garden', icon: 'fas fa-home' },
                    { id: 'health', name: 'Health & Beauty', icon: 'fas fa-heartbeat' }
                ];
                
                const container = document.getElementById('productCategories');
                
                categories.forEach(category => {
                    const categoryElement = document.createElement('div');
                    categoryElement.className = `product ${category.id === this.currentCategory ? 'active' : ''}`;
                    categoryElement.innerHTML = `
                        <i class="${category.icon}"></i>
                        <div>${category.name}</div>
                    `;
                    categoryElement.onclick = () => this.selectCategory(category.id);
                    container.appendChild(categoryElement);
                });
            }

            selectCategory(categoryId) {
                this.currentCategory = categoryId;
                document.querySelectorAll('#productCategories .product').forEach(p => p.classList.remove('active'));
                event.target.closest('.product').classList.add('active');
                this.addLog(`Selected category: ${categoryId}`, 'info');
                this.filterProducts();
            }

            loadProducts() {
                // Sample product data
                this.products = [
                    { id: 1, name: 'Smartphone', price: 599.99, category: 'electronics', barcode: '123456789', stock: 15 },
                    { id: 2, name: 'Laptop', price: 999.99, category: 'electronics', barcode: '123456790', stock: 8 },
                    { id: 3, name: 'T-Shirt', price: 19.99, category: 'clothing', barcode: '123456791', stock: 50 },
                    { id: 4, name: 'Jeans', price: 49.99, category: 'clothing', barcode: '123456792', stock: 30 },
                    { id: 5, name: 'Coffee', price: 4.99, category: 'food', barcode: '123456793', stock: 100 },
                    { id: 6, name: 'Chocolate', price: 2.99, category: 'food', barcode: '123456794', stock: 75 },
                    { id: 7, name: 'Desk Lamp', price: 24.99, category: 'home', barcode: '123456795', stock: 20 },
                    { id: 8, name: 'Shampoo', price: 8.99, category: 'health', barcode: '123456796', stock: 40 }
                ];
                
                this.filterProducts();
            }

            filterProducts() {
                const container = document.getElementById('productsList');
                container.innerHTML = '';
                
                const filteredProducts = this.currentCategory === 'all' 
                    ? this.products 
                    : this.products.filter(p => p.category === this.currentCategory);
                
                filteredProducts.forEach(product => {
                    const productElement = document.createElement('div');
                    productElement.className = 'product';
                    productElement.innerHTML = `
                        <div>${product.name}</div>
                        <div class="positive">$${product.price.toFixed(2)}</div>
                        <small>Stock: ${product.stock}</small>
                    `;
                    productElement.onclick = () => this.addToCart(product);
                    container.appendChild(productElement);
                });
            }

            addToCart(product) {
                // Check if product already in cart
                const existingItem = this.cart.find(item => item.id === product.id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.cart.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        quantity: 1
                    });
                }
                
                this.updateCartDisplay();
                this.addLog(`Added ${product.name} to cart`, 'success');
            }

            removeFromCart(productId) {
                this.cart = this.cart.filter(item => item.id !== productId);
                this.updateCartDisplay();
                this.addLog(`Removed item from cart`, 'info');
            }

            updateCartQuantity(productId, change) {
                const item = this.cart.find(item => item.id === productId);
                if (item) {
                    item.quantity += change;
                    if (item.quantity <= 0) {
                        this.removeFromCart(productId);
                    } else {
                        this.updateCartDisplay();
                    }
                }
            }

            updateCartDisplay() {
                const cartContainer = document.getElementById('cartItems');
                const totalElement = document.getElementById('cartTotal');
                
                if (this.cart.length === 0) {
                    cartContainer.innerHTML = '<div class="status info">Cart is empty</div>';
                    totalElement.textContent = 'Total: $0.00';
                    return;
                }
                
                let total = 0;
                cartContainer.innerHTML = this.cart.map(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    return `
                        <div class="cart-item">
                            <div>${item.name}</div>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="retailPOS.updateCartQuantity(${item.id}, -1)">-</button>
                                <span>${item.quantity}</span>
                                <button class="quantity-btn" onclick="retailPOS.updateCartQuantity(${item.id}, 1)">+</button>
                                <span>$${itemTotal.toFixed(2)}</span>
                                <button class="quantity-btn btn-danger" onclick="retailPOS.removeFromCart(${item.id})">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
                
                totalElement.textContent = `Total: $${total.toFixed(2)}`;
                this.updateReceiptPreview();
            }

            loadPaymentMethods() {
                const methods = [
                    { id: 'cash', name: 'Cash', icon: 'fas fa-money-bill-wave' },
                    { id: 'card', name: 'Credit Card', icon: 'fas fa-credit-card' },
                    { id: 'mobile', name: 'Mobile Pay', icon: 'fas fa-mobile-alt' },
                    { id: 'online', name: 'Online', icon: 'fas fa-globe' }
                ];
                
                const container = document.getElementById('paymentMethods');
                
                methods.forEach(method => {
                    const methodElement = document.createElement('div');
                    methodElement.className = `payment-method ${method.id === this.selectedPaymentMethod ? 'active' : ''}`;
                    methodElement.innerHTML = `
                        <i class="${method.icon}"></i>
                        <div>${method.name}</div>
                    `;
                    methodElement.onclick = () => this.selectPaymentMethod(method.id);
                    container.appendChild(methodElement);
                });
            }

            selectPaymentMethod(methodId) {
                this.selectedPaymentMethod = methodId;
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('active'));
                event.target.closest('.payment-method').classList.add('active');
                this.addLog(`Selected payment method: ${methodId}`, 'info');
            }

            processPayment() {
                if (this.cart.length === 0) {
                    this.addLog('âŒ Cannot process payment: Cart is empty', 'error');
                    return;
                }

                const customerName = document.getElementById('customerName').value || 'Walk-in Customer';
                const customerPhone = document.getElementById('customerPhone').value || 'N/A';
                
                // Calculate total
                const subtotal = this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const tax = subtotal * 0.08; // 8% tax
                const total = subtotal + tax;
                
                // Create transaction
                const transaction = {
                    id: Date.now(),
                    customer: {
                        name: customerName,
                        phone: customerPhone
                    },
                    items: [...this.cart],
                    subtotal,
                    tax,
                    total,
                    paymentMethod: this.selectedPaymentMethod,
                    timestamp: new Date()
                };
                
                this.transactions.unshift(transaction);
                
                // Update daily stats
                this.dailyStats.totalSales += total;
                this.dailyStats.transactionCount += 1;
                this.updateDailyStats();
                
                this.addLog(`âœ… Payment processed: $${total.toFixed(2)} via ${this.selectedPaymentMethod}`, 'success');
                
                // Clear cart
                this.cart = [];
                this.updateCartDisplay();
                
                // Clear customer fields
                document.getElementById('customerName').value = '';
                document.getElementById('customerPhone').value = '';
                
                // Print receipt
                this.printReceipt(transaction);
            }

            printReceipt(transaction) {
                let receiptText = `=== RETAIL POS RECEIPT ===\n`;
                receiptText += `Date: ${transaction.timestamp.toLocaleString()}\n`;
                receiptText += `Transaction: #${transaction.id}\n`;
                receiptText += `Customer: ${transaction.customer.name}\n`;
                receiptText += `Phone: ${transaction.customer.phone}\n`;
                receiptText += `----------------------------\n`;
                
                transaction.items.forEach(item => {
                    receiptText += `${item.name} x${item.quantity} $${(item.price * item.quantity).toFixed(2)}\n`;
                });
                
                receiptText += `----------------------------\n`;
                receiptText += `Subtotal: $${transaction.subtotal.toFixed(2)}\n`;
                receiptText += `Tax (8%): $${transaction.tax.toFixed(2)}\n`;
                receiptText += `TOTAL: $${transaction.total.toFixed(2)}\n`;
                receiptText += `Payment: ${transaction.paymentMethod.toUpperCase()}\n`;
                receiptText += `============================\n`;
                receiptText += `Thank you for your business!\n`;
                
                document.getElementById('receiptPreview').textContent = receiptText;
                
                // In a real POS, this would send to a receipt printer
                this.addLog(`ðŸ“„ Receipt printed for transaction #${transaction.id}`, 'info');
            }

            updateDailyStats() {
                document.getElementById('totalSales').textContent = `$${this.dailyStats.totalSales.toFixed(2)}`;
                document.getElementById('transactionCount').textContent = this.dailyStats.transactionCount;
            }

            simulateDailyStats() {
                // Simulate some daily transactions for demo
                this.dailyStats.totalSales = 1247.53;
                this.dailyStats.transactionCount = 18;
                this.updateDailyStats();
            }

            clearCart() {
                this.cart = [];
                this.updateCartDisplay();
                this.addLog('ðŸ›’ Cart cleared', 'info');
            }

            applyDiscount() {
                if (this.cart.length === 0) {
                    this.addLog('âŒ Cannot apply discount: Cart is empty', 'error');
                    return;
                }
                
                // Apply 10% discount to all items
                this.cart.forEach(item => {
                    item.price = item.price * 0.9;
                });
                
                this.updateCartDisplay();
                this.addLog('âœ… 10% discount applied to all items', 'success');
            }

            openCashDrawer() {
                this.addLog('ðŸ’° Cash drawer opened', 'info');
                // In a real POS, this would trigger the physical cash drawer
            }

            printLastReceipt() {
                if (this.transactions.length === 0) {
                    this.addLog('âŒ No transactions to reprint', 'error');
                    return;
                }
                
                const lastTransaction = this.transactions[0];
                this.printReceipt(lastTransaction);
                this.addLog(`ðŸ“„ Last receipt reprinted (#${lastTransaction.id})`, 'info');
            }

            voidTransaction() {
                if (this.transactions.length === 0) {
                    this.addLog('âŒ No transactions to void', 'error');
                    return;
                }
                
                const voidedTransaction = this.transactions.shift();
                this.dailyStats.totalSales -= voidedTransaction.total;
                this.dailyStats.transactionCount -= 1;
                this.updateDailyStats();
                
                this.addLog(`âŒ Transaction #${voidedTransaction.id} voided`, 'error');
            }

            updateReceiptPreview() {
                if (this.cart.length === 0) {
                    document.getElementById('receiptPreview').textContent = 
                        "=== RETAIL POS RECEIPT ===\n\nNo transaction yet\n\n========================";
                    return;
                }
                
                const subtotal = this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const tax = subtotal * 0.08;
                const total = subtotal + tax;
                
                let receiptText = `=== RETAIL POS RECEIPT ===\n`;
                receiptText += `Date: ${new Date().toLocaleString()}\n`;
                receiptText += `----------------------------\n`;
                
                this.cart.forEach(item => {
                    receiptText += `${item.name} x${item.quantity} $${(item.price * item.quantity).toFixed(2)}\n`;
                });
                
                receiptText += `----------------------------\n`;
                receiptText += `Subtotal: $${subtotal.toFixed(2)}\n`;
                receiptText += `Tax (8%): $${tax.toFixed(2)}\n`;
                receiptText += `TOTAL: $${total.toFixed(2)}\n`;
                receiptText += `============================\n`;
                
                document.getElementById('receiptPreview').textContent = receiptText;
            }

            addLog(message, type = 'info') {
                const log = document.getElementById('transactionLog');
                const entry = document.createElement('div');
                entry.className = `log-entry log-${type}`;
                entry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
                log.appendChild(entry);
                log.scrollTop = log.scrollHeight;
            }

            updateStatus(message, type = 'info') {
                document.getElementById('systemStatus').className = `status ${type}`;
                document.getElementById('systemStatus').textContent = message;
            }
        }

        // Initialize the POS when page loads
        let retailPOS;

        window.addEventListener('load', () => {
            retailPOS = new RetailPOS();
        });

        // Global functions for buttons
        function processPayment() {
            retailPOS.processPayment();
        }

        function clearCart() {
            retailPOS.clearCart();
        }

        function applyDiscount() {
            retailPOS.applyDiscount();
        }

        function openCashDrawer() {
            retailPOS.openCashDrawer();
        }

        function printLastReceipt() {
            retailPOS.printLastReceipt();
        }

        function voidTransaction() {
            retailPOS.voidTransaction();
        }
    </script>
</body>
</html>
