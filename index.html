souk-al-rahma/
â”œâ”€â”€ package.json
â”œâ”€â”€ server.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env.example
â””â”€â”€ public/
    â””â”€â”€ index.html{
  "name": "souk-al-rahma",
  "version": "1.0.0",
  "description": "Halal Marketplace - Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "keywords": ["islamic", "halal", "marketplace", "telegram", "bot"],
  "author": "Serving the Ummah",
  "license": "MIT",
  "dependencies": {
    "telegraf": "^4.12.2",
    "express": "^4.18.2"
  }
}// Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù
// Souk Al-Rahma - Halal Marketplace
// REPLACE "YOUR_BOT_TOKEN_HERE" with your actual bot token!

const express = require('express');
const { Telegraf } = require('telegraf');
const path = require('path');

const app = express();
const bot = new Telegraf('YOUR_BOT_TOKEN_HERE'); // â† REPLACE THIS!

// Middleware
app.use(express.json());
app.use(express.static(path.join(__dirname, 'public')));

// Quranic Verses for Daily Inspiration
const quranicVerses = [
    {
        arabic: "ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ Ø¥ÙØ°ÙØ§ ØªÙØ¯ÙØ§ÙŠÙÙ†ØªÙÙ… Ø¨ÙØ¯ÙÙŠÙ’Ù†Ù Ø¥ÙÙ„ÙÙ‰Ù° Ø£ÙØ¬ÙÙ„Ù Ù…ÙÙ‘Ø³ÙÙ…Ù‹Ù‘Ù‰ ÙÙØ§ÙƒÙ’ØªÙØ¨ÙÙˆÙ‡Ù",
        translation: "O you who have believed, when you contract a debt for a specified term, write it down."
    },
    {
        arabic: "ÙˆÙØ£ÙØ­ÙÙ„ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ù’Ø¨ÙÙŠÙ’Ø¹Ù ÙˆÙØ­ÙØ±ÙÙ‘Ù…Ù Ø§Ù„Ø±ÙÙ‘Ø¨ÙØ§",
        translation: "Allah has permitted trade and has forbidden interest."
    },
    {
        arabic: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙŠÙØ£Ù’Ù…ÙØ±ÙÙƒÙÙ…Ù’ Ø£ÙÙ† ØªÙØ¤ÙØ¯ÙÙ‘ÙˆØ§ Ø§Ù„Ù’Ø£ÙÙ…ÙØ§Ù†ÙØ§ØªÙ Ø¥ÙÙ„ÙÙ‰Ù° Ø£ÙÙ‡Ù’Ù„ÙÙ‡ÙØ§",
        translation: "Indeed, Allah commands you to render trusts to whom they are due."
    }
];

// Simple Database (Replace with real database later)
const users = new Map();
const products = [];
const conversations = new Map();

// Islamic Marketplace Class
class HalalMarketplace {
    constructor() {
        this.verseOfTheDay = quranicVerses[Math.floor(Math.random() * quranicVerses.length)];
    }

    addUser(telegramUser) {
        const user = {
            id: telegramUser.id,
            username: telegramUser.username,
            firstName: telegramUser.first_name,
            lastName: telegramUser.last_name || '',
            joinDate: new Date(),
            trustScore: 5.0,
            isVerified: false,
            productsListed: 0,
            successfulTransactions: 0
        };
        users.set(telegramUser.id, user);
        return user;
    }

    addProduct(sellerId, productData) {
        if (this.isProductHalal(productData)) {
            const product = {
                id: Date.now().toString(),
                sellerId,
                sellerName: users.get(sellerId)?.firstName || 'Anonymous',
                ...productData,
                status: 'active',
                createdAt: new Date(),
                views: 0
            };
            products.push(product);
            
            // Update user stats
            const user = users.get(sellerId);
            if (user) user.productsListed++;
            
            return product;
        }
        throw new Error('Product does not meet halal requirements');
    }

    isProductHalal(product) {
        const haramCategories = ['alcohol', 'pork', 'haram', 'interest', 'riba', 'gambling', 'casino', 'lottery'];
        const productText = (product.title + ' ' + product.description + ' ' + product.category).toLowerCase();
        
        return !haramCategories.some(haram => productText.includes(haram));
    }

    getProducts() {
        return products.filter(p => p.status === 'active');
    }

    getProductsByCategory(category) {
        return this.getProducts().filter(p => 
            p.category.toLowerCase().includes(category.toLowerCase())
        );
    }

    calculateZakat(amount) {
        // 2.5% Zakat calculation
        return (amount * 0.025).toFixed(2);
    }
}

const marketplace = new HalalMarketplace();

// ==================== TELEGRAM BOT COMMANDS ====================

bot.start((ctx) => {
    const user = marketplace.addUser(ctx.from);
    
    const welcomeMessage = `
ğŸ•Œ *Welcome to Souk Al-Rahma!*

*Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù*

Assalamu Alaikum *${user.firstName}*! 

Your journey in halal commerce begins here. May Allah bless your transactions and make them a means of barakah for you.

*ğŸ“– Today's Quranic Guidance:*
${marketplace.verseOfTheDay.arabic}
*${marketplace.verseOfTheDay.translation}*

*ğŸ›ï¸ Available Commands:*
/products - Browse all halal products
/sell - List your product for sale  
/categories - View by category
/profile - Your seller profile
/help - Islamic trading guidance
/zakat - Calculate Zakat on amount

*Remember:* Trade with honesty and fear Allah in all your transactions.
    `.trim();

    ctx.reply(welcomeMessage, { parse_mode: 'Markdown' });
});

bot.command('help', (ctx) => {
    const helpMessage = `
*ğŸ¤² Islamic Trading Guidelines*

*Principles to Follow:*
â€¢ Be honest about product condition
â€¢ Disclose all defects clearly  
â€¢ Price items fairly without greed
â€¢ Fulfill your promises and agreements
â€¢ Treat buyers with respect and patience

*Quranic Reminder:*
"ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ Ù„ÙØ§ ØªÙØ£Ù’ÙƒÙÙ„ÙÙˆØ§ Ø£ÙÙ…Ù’ÙˆÙØ§Ù„ÙÙƒÙÙ… Ø¨ÙÙŠÙ’Ù†ÙÙƒÙÙ… Ø¨ÙØ§Ù„Ù’Ø¨ÙØ§Ø·ÙÙ„Ù"
"O you who believe, do not consume one another's wealth unjustly."

*Need help?* Contact support through our community.
    `.trim();
    
    ctx.reply(helpMessage, { parse_mode: 'Markdown' });
});

bot.command('products', (ctx) => {
    const allProducts = marketplace.getProducts();
    
    if (allProducts.length === 0) {
        ctx.reply('ğŸ“¦ *No products available yet!*\n\nBe the first to list something using /sell', { 
            parse_mode: 'Markdown' 
        });
        return;
    }

    let message = `ğŸ“¦ *Available Products (${allProducts.length})*\n\n`;
    
    allProducts.slice(0, 10).forEach((product, index) => {
        message += `*${index + 1}. ${product.title}*\n`;
        message += `ğŸ’° Price: $${product.price}\n`;
        message += `ğŸ“ Category: ${product.category}\n`;
        message += `ğŸ‘¤ Seller: ${product.sellerName}\n`;
        message += `ğŸ“ ${product.description}\n\n`;
    });

    if (allProducts.length > 10) {
        message += `... and ${allProducts.length - 10} more products!`;
    }

    message += `\nğŸ’« *Use /sell to list your own product*`;

    ctx.reply(message, { parse_mode: 'Markdown' });
});

bot.command('categories', (ctx) => {
    const categories = [...new Set(products.map(p => p.category))];
    
    if (categories.length === 0) {
        ctx.reply('ğŸ“ *No categories yet!*\n\nStart by listing products with /sell', {
            parse_mode: 'Markdown'
        });
        return;
    }

    let message = `ğŸ“ *Product Categories*\n\n`;
    categories.forEach(category => {
        const count = marketplace.getProductsByCategory(category).length;
        message += `â€¢ ${category} (${count} items)\n`;
    });

    message += `\n*Use:* /products_<category> to browse a category\n*Example:* /products_books for Islamic books`;

    ctx.reply(message, { parse_mode: 'Markdown' });
});

// Dynamic category commands
categories.forEach(category => {
    bot.command(`products_${category.toLowerCase()}`, (ctx) => {
        const categoryProducts = marketplace.getProductsByCategory(category);
        
        if (categoryProducts.length === 0) {
            ctx.reply(`ğŸ“¦ No products in *${category}* category yet!\n\nBe the first to list with /sell`, {
                parse_mode: 'Markdown'
            });
            return;
        }

        let message = `ğŸ“¦ *${category} Products (${categoryProducts.length})*\n\n`;
        
        categoryProducts.forEach((product, index) => {
            message += `*${index + 1}. ${product.title}*\n`;
            message += `ğŸ’° $${product.price} | ğŸ‘¤ ${product.sellerName}\n`;
            message += `ğŸ“ ${product.description}\n\n`;
        });

        ctx.reply(message, { parse_mode: 'Markdown' });
    });
});

bot.command('sell', (ctx) => {
    conversations.set(ctx.from.id, 'awaiting_product');
    
    ctx.reply(`
ğŸ“¦ *List Your Product*

Please send your product details in *EXACTLY* this format:

*Product Title*
Price: $amount
Category: books/electronics/clothing/etc.
Description: Halal, condition, details...

*Example:*
Islamic Prayer Rug
Price: $25
Category: religious
Description: Brand new, beautiful design, perfect for salah

*ğŸ•Œ Islamic Reminder:*
"Ø¥Ù†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø·ÙÙŠÙÙ‘Ø¨ÙŒ Ù„ÙØ§ ÙŠÙÙ‚Ù’Ø¨ÙÙ„Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø·ÙÙŠÙÙ‘Ø¨Ù‹Ø§"
"Allah is Good and accepts only that which is good."
    `.trim(), { parse_mode: 'Markdown' });
});

bot.command('profile', (ctx) => {
    const user = users.get(ctx.from.id);
    
    if (!user) {
        ctx.reply('Please use /start first to create your profile.');
        return;
    }

    const profileMessage = `
ğŸ‘¤ *Your Seller Profile*

*Name:* ${user.firstName} ${user.lastName}
*Username:* ${user.username || 'Not set'}
*Member Since:* ${user.joinDate.toLocaleDateString()}
*Trust Score:* â­ ${user.trustScore}/5.0
*Products Listed:* ${user.productsListed}
*Successful Transactions:* ${user.successfulTransactions}

*ğŸ’« Tips to Improve Trust:*
â€¢ Be responsive to buyers
â€¢ Describe products accurately  
â€¢ Resolve issues fairly
â€¢ Fulfill promises promptly
    `.trim();

    ctx.reply(profileMessage, { parse_mode: 'Markdown' });
});

bot.command('zakat', (ctx) => {
    conversations.set(ctx.from.id, 'awaiting_zakat_amount');
    
    ctx.reply(`
ğŸ¤² *Zakat Calculator*

Please enter the amount you want to calculate Zakat for:

*Example:* 1000 (for $1000)

*Zakat Rate:* 2.5% of savings above Nisab
*Quranic Basis:* "Take from their wealth charity to purify them" (9:103)

*Note:* This is for educational purposes. Consult local scholars for precise Zakat calculation.
    `.trim(), { parse_mode: 'Markdown' });
});

// Handle product creation
bot.on('text', (ctx) => {
    const userId = ctx.from.id;
    const conversationState = conversations.get(userId);
    const messageText = ctx.message.text;

    if (conversationState === 'awaiting_product') {
        conversations.delete(userId);
        
        try {
            // Simple parsing - in real app, use proper NLP
            const lines = messageText.split('\n');
            const title = lines[0].trim();
            const priceLine = lines.find(line => line.toLowerCase().includes('price:'));
            const categoryLine = lines.find(line => line.toLowerCase().includes('category:'));
            const descriptionLine = lines.find(line => line.toLowerCase().includes('description:'));

            if (!title || !priceLine) {
                ctx.reply('âŒ *Invalid format!* Please use the exact format shown in /sell', {
                    parse_mode: 'Markdown'
                });
                return;
            }

            const price = priceLine.match(/\$?(\d+)/)?.[1];
            const category = categoryLine?.split(':')[1]?.trim() || 'general';
            const description = descriptionLine?.split(':')[1]?.trim() || 'No description provided';

            if (!price) {
                ctx.reply('âŒ *Price not found!* Please include "Price: $amount"', {
                    parse_mode: 'Markdown'
                });
                return;
            }

            const productData = {
                title,
                price: parseInt(price),
                category,
                description
            };

            const product = marketplace.addProduct(userId, productData);
            
            ctx.reply(`
âœ… *Product Listed Successfully!*

*Title:* ${product.title}
*Price:* $${product.price}
*Category:* ${product.category}
*Description:* ${product.description}

*ğŸ“Š What's Next?*
â€¢ Buyers can see your product with /products
â€¢ You can view all products with /products
â€¢ Check categories with /categories

*ğŸ•Œ May Allah bring barakah to this transaction!*
            `.trim(), { parse_mode: 'Markdown' });

        } catch (error) {
            ctx.reply(`âŒ *Error:* ${error.message}\n\nPlease try again with /sell`, {
                parse_mode: 'Markdown'
            });
        }
    }
    else if (conversationState === 'awaiting_zakat_amount') {
        conversations.delete(userId);
        
        const amount = parseFloat(messageText);
        if (isNaN(amount) || amount <= 0) {
            ctx.reply('âŒ Please enter a valid amount (e.g., 1000 for $1000)');
            return;
        }

        const zakat = marketplace.calculateZakat(amount);
        
        ctx.reply(`
ğŸ¤² *Zakat Calculation*

*Amount:* $${amount}
*Zakat (2.5%):* $${zakat}

*ğŸ“– Quranic Guidance:*
"Take from their wealth charity to purify them and cause them to increase." (9:103)

*ğŸ’« Recommended Actions:*
â€¢ Give to poor and needy Muslims
â€¢ Support Islamic education
â€¢ Help those in debt
â€¢ Aid travelers in need

*Note:* Consult local scholars for your specific Zakat obligations.
        `.trim(), { parse_mode: 'Markdown' });
    }
});

// Error handling
bot.catch((err, ctx) => {
    console.error(`Error for ${ctx.updateType}:`, err);
    ctx.reply('âŒ An error occurred. Please try again later.');
});

// ==================== EXPRESS ROUTES ====================

app.get('/', (req, res) => {
    res.json({
        name: 'Souk Al-Rahma',
        version: '1.0.0',
        message: 'Halal Marketplace - Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…',
        status: 'Running',
        users: users.size,
        products: products.length,
        quranicVerse: marketplace.verseOfTheDay
    });
});

app.get('/stats', (req, res) => {
    res.json({
        totalUsers: users.size,
        totalProducts: products.length,
        activeProducts: marketplace.getProducts().length,
        categories: [...new Set(products.map(p => p.category))],
        verseOfTheDay: marketplace.verseOfTheDay
    });
});

// ==================== START SERVERS ====================

const PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
    console.log(`
ğŸ•Œ Souk Al-Rahma Server Running
ğŸ“ Port: ${PORT}
ğŸ“¿ Started with: Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù
ğŸ‘¥ Users: ${users.size}
ğŸ“¦ Products: ${products.length}
    `.trim());
});

bot.launch().then(() => {
    console.log('ğŸ¤– Telegram Bot Activated and LIVE!');
    console.log('ğŸ’« Serving the Ummah with halal commerce...');
}).catch(err => {
    console.error('âŒ Bot failed to start:', err.message);
    console.log('ğŸ’¡ Check your bot token and try again.');
});

// Graceful shutdown
process.once('SIGINT', () => {
    console.log('ğŸ•Œ Shutting down gracefully...');
    bot.stop('SIGINT');
    process.exit(0);
});

process.once('SIGTERM', () => {
    console.log('ğŸ•Œ Shutting down gracefully...');
    bot.stop('SIGTERM');
    process.exit(0);
});
            <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙˆÙ‚ Ø§Ù„Ø±Ø­Ù…Ø© - Souk Al-Rahma</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Traditional Arabic', Tahoma, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0d8b4e 0%, #0a6b3a 100%);
            color: #2c3e50;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px 0;
        }
        
        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .arabic {
            font-size: 2rem;
            color: #d4af37;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .header p {
            opacity: 0.95;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .quran-verse {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-right: 6px solid #d4af37;
            backdrop-filter: blur(10px);
        }
        
        .quran-verse .arabic {
            font-size: 1.5rem;
            color: #0d8b4e;
            margin-bottom: 20px;
            line-height: 1.8;
            font-weight: 600;
        }
        
        .quran-verse .translation {
            color: #7f8c8d;
            font-style: italic;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .feature-card {
            background: white;
            border-radius: 20px;
            padding: 30px 25px;
            margin: 20px 0;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(13, 139, 78, 0.1);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-align: center;
            display: block;
        }
        
        .feature-card h3 {
            color: #0d8b4e;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .feature-card p {
            color: #666;
            text-align: center;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: white;
            text-decoration: none;
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            margin: 15px 0;
            border: none;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        
        .btn:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .islamic-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            pointer-events: none;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><path fill="%23000" d="M60,0 L70,45 L120,60 L70,75 L60,120 L50,75 L0,60 L50,45 Z"/></svg>');
            background-size: 120px 120px;
            z-index: -1;
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 25px 20px;
            opacity: 0.9;
            font-size: 0.95rem;
        }
        
        .footer p {
            margin: 8px 0;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            color: white;
            text-align: center;
        }
        
        .stat-item {
            padding: 15px;
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header .arabic {
                font-size: 1.6rem;
            }
            
            .quran-verse .arabic {
                font-size: 1.3rem;
            }
            
            .feature-card {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="islamic-pattern"></div>
    
    <div class="container">
        <div class="header">
            <div class="arabic">Ø³ÙˆÙ‚ Ø§Ù„Ø±Ø­Ù…Ø©</div>
            <h1>ğŸª Souk Al-Rahma</h1>
            <p>Your Compassionate Halal Marketplace</p>
            <p>Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</p>
        </div>
        
        <div class="stats" id="stats">
            <div class="stat-item">
                <span class="stat-number" id="userCount">0</span>
                <span class="stat-label">Users</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="productCount">0</span>
                <span class="stat-label">Products</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">â­</span>
                <span class="stat-label">Halal</span>
            </div>
        </div>
        
        <div class="quran-verse">
            <div class="arabic" id="quranArabic">ÙˆÙØ£ÙØ­ÙÙ„ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ù’Ø¨ÙÙŠÙ’Ø¹Ù ÙˆÙØ­ÙØ±ÙÙ‘Ù…Ù Ø§Ù„Ø±ÙÙ‘Ø¨ÙØ§</div>
            <div class="translation" id="quranTranslation">"And Allah has permitted trade and has forbidden interest." (Quran 2:275)</div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">ğŸ“¦</div>
            <h3>Halal Marketplace</h3>
            <p>Buy and sell with Islamic principles. All products verified for halal compliance and ethical standards.</p>
            <button class="btn" onclick="openBot()">Start Trading</button>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">ğŸ¤²</div>
            <h3>Zakat Calculator</h3>
            <p>Automatically calculate and distribute Zakat on your transactions according to Islamic principles.</p>
            <button class="btn btn-secondary" onclick="calculateZakat()">Calculate Zakat</button>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">â­</div>
            <h3>Trust System</h3>
            <p>Community-based ratings and Islamic dispute resolution ensuring fair and honest transactions.</p>
            <button class="btn" onclick="viewTrust()">Trust Guidelines</button>
        </div>
        
        <div class="footer">
            <p>Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</p>
            <p>Starting with Allah's name, the Most Gracious, the Most Merciful</p>
            <p>Â© 2024 Souk Al-Rahma - Serving the Ummah</p>
        </div>
    </div>

    <script>
        // Initialize Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        tg.setHeaderColor('#0d8b4e');
        tg.setBackgroundColor('#0d8b4e');
        
        // Fetch live stats
        async function fetchStats() {
            try {
                const response = await fetch('/stats');
                const data = await response.json();
                
                document.getElementById('userCount').textContent = data.totalUsers;
                document.getElementById('productCount').textContent = data.activeProducts;
                document.getElementById('quranArabic').textContent = data.verseOfTheDay.arabic;
                document.getElementById('quranTranslation').textContent = data.verseOfTheDay.translation;
            } catch (error) {
                console.log('Stats not available yet');
            }
        }
        
        function openBot() {
            tg.showPopup({
                title: 'ğŸ•Œ Welcome to Souk Al-Rahma',
                message: 'Open Telegram and start using our halal marketplace bot! You can buy, sell, and trade with Islamic principles.',
                buttons: [
                    { type: 'default', text: 'Open Bot', id: 'open_bot' },
                    { type: 'cancel', text: 'Later' }
                ]
            }).then(btnId => {
                if (btnId === 'open_bot') {
                    tg.openTelegramLink('https://t.me/' + tg.initDataUnsafe.user?.username || 'your_bot_username');
                }
            });
        }
        
        function calculateZakat() {
            tg.showPopup({
                title: 'ğŸ¤² Zakat Calculator',
                message: 'Use the /zakat command in our Telegram bot to calculate Zakat on any amount according to Islamic principles.',
                buttons: [{ type: 'ok', text: 'Insha Allah' }]
            });
        }
        
        function viewTrust() {
            tg.showPopup({
                title: 'â­ Islamic Trust System',
                message: 'Our platform is built on Quranic principles: honesty, transparency, fairness, and fulfilling promises.',
                buttons: [{ type: 'ok', text: 'Masha Allah' }]
            });
        }
        
        // Show welcome message
        setTimeout(() => {
            tg.showPopup({
                title: 'Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ - Welcome!',
                message: 'May Allah bless your journey in halal commerce and bring barakah to all your transactions.',
                buttons: [{ type: 'default', text: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù', id: 'bismillah' }]
            });
        }, 1500);
        
        // Load stats
        fetchStats();
        setInterval(fetchStats, 30000); // Update every 30 seconds
    </script>
</body>
</html>
node_modules/
.env
*.log
.DS_Store
npm-debug.log*
yarn-debug.log*
yarn-error.log*
            # Copy this to .env and replace with your actual values
BOT_TOKEN=your_telegram_bot_token_here
PORT=3000
            # 1. Create project folder
mkdir souk-al-rahma
cd souk-al-rahma

# 2. Create all the files above with the exact content

# 3. Install dependencies
npm install

# 4. Replace "YOUR_BOT_TOKEN_HERE" in server.js with your actual token

# 5. LAUNCH!
npm start
            
