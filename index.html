<!DOCTYPE html>
<html>
<head>
    <title>Pro Crypto Auto-Invest</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial; 
            background: #0a0a0a; 
            color: white; 
            padding: 10px;
            overflow-x: hidden;
        }
        
        /* Crypto Bubble Grid */
        .bubbles-container {
            position: relative;
            height: 65vh;
            overflow: hidden;
            margin-bottom: 15px;
            border: 2px solid #1a1a2e;
            border-radius: 20px;
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e);
        }
        
        .coin-bubble {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);
            animation: float 6s infinite ease-in-out;
            text-align: center;
            flex-direction: column;
            overflow: hidden;
        }
        
        .coin-bubble:hover {
            transform: scale(1.15);
            border-color: #00ff88;
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.4);
            z-index: 100;
        }
        
        .bubble-xlarge { width: 140px; height: 140px; }
        .bubble-large { width: 110px; height: 110px; }
        .bubble-medium { width: 90px; height: 90px; }
        .bubble-small { width: 70px; height: 70px; }
        .bubble-tiny { width: 60px; height: 60px; }
        
        .volume-pulse {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: absolute;
            top: 8px;
            right: 8px;
            animation: pulse 2s infinite;
        }
        .volume-high { background: #00ff88; }
        .volume-medium { background: #ffaa00; }
        .volume-low { background: #ff4444; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
            25% { transform: translateY(-15px) rotate(1deg) scale(1.02); }
            50% { transform: translateY(-8px) rotate(-1deg) scale(1.01); }
            75% { transform: translateY(-12px) rotate(0.5deg) scale(1.015); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Trading Panel */
        .trade-panel {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin: 10px 0;
            display: none;
            border: 1px solid #00ff88;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.2);
        }
        
        .param-bubble {
            background: #2d2d44;
            border: none;
            color: white;
            padding: 15px 10px;
            border-radius: 15px;
            cursor: pointer;
            text-align: center;
            margin: 5px;
            transition: all 0.2s ease;
            flex: 1;
        }
        
        .param-bubble.selected {
            background: #00ff88;
            color: black;
            font-weight: bold;
            transform: scale(1.05);
        }
        
        .bubble-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }
        
        .btn-bubble {
            background: #00ff88;
            color: black;
            border: none;
            padding: 18px;
            border-radius: 15px;
            font-weight: bold;
            width: 100%;
            margin: 10px 0;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        /* Stats Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .stat-card {
            background: #1a1a2e;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #2d2d44;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #00ff88;
            margin: 5px 0;
        }
        
        .stat-label {
            font-size: 12px;
            color: #888;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            background: #1a1a2e;
            border-radius: 12px;
            padding: 5px;
            margin: 15px 0;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: #00ff88;
            color: black;
            font-weight: bold;
        }
        
        /* Add Coin Panel */
        .add-coin-panel {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
        }
        
        .search-input {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #444;
            background: #0a0a0a;
            color: white;
            margin-bottom: 10px;
        }
        
        .exchange-badge {
            background: #2d2d44;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin: 2px;
            display: inline-block;
            cursor: pointer;
        }
        
        .exchange-badge.selected {
            background: #00ff88;
            color: black;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Stats -->
        <div style="text-align: center; margin-bottom: 15px;">
            <h1>ü™ô Pro Crypto Auto-Invest</h1>
            <p>Tap bubbles ‚Ä¢ Auto-invest ‚Ä¢ Track profits</p>
        </div>

        <!-- Quick Stats Dashboard -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Total Invested</div>
                <div class="stat-value" id="totalInvested">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Current Value</div>
                <div class="stat-value" id="currentValue">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Daily Profit</div>
                <div class="stat-value" id="dailyProfit">+$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Monthly Profit</div>
                <div class="stat-value" id="monthlyProfit">+$0</div>
            </div>
        </div>

        <!-- Tabs for Coin Selection -->
        <div class="tabs">
            <div class="tab active" onclick="switchTab('top10')">Top 10</div>
            <div class="tab" onclick="switchTab('top20')">Top 20</div>
            <div class="tab" onclick="switchTab('top50')">Top 50</div>
            <div class="tab" onclick="switchTab('top100')">Top 100</div>
            <div class="tab" onclick="switchTab('custom')">Custom</div>
        </div>

        <!-- Crypto Bubbles Grid -->
        <div class="bubbles-container" id="bubblesContainer">
            <!-- Bubbles will be dynamically created -->
        </div>

        <!-- Add Custom Coin Panel -->
        <div class="add-coin-panel" id="customPanel" style="display: none;">
            <h4>‚ûï Add Custom Coins</h4>
            <input type="text" class="search-input" id="coinSearch" placeholder="Search or add coin symbol (BTC, ETH, SOL...)">
            
            <div style="margin: 10px 0;">
                <div style="font-size: 12px; color: #888; margin-bottom: 8px;">Exchanges:</div>
                <div>
                    <span class="exchange-badge selected" data-exchange="binance">Binance</span>
                    <span class="exchange-badge" data-exchange="pionex">Pionex</span>
                    <span class="exchange-badge" data-exchange="kucoin">KuCoin</span>
                    <span class="exchange-badge" data-exchange="bybit">Bybit</span>
                    <span class="exchange-badge" data-exchange="gateio">Gate.io</span>
                </div>
            </div>
            
            <button class="btn-bubble" onclick="addCustomCoin()">Add Coin to Bubbles</button>
        </div>

        <!-- Trading Panel -->
        <div class="trade-panel" id="tradePanel">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 id="selectedCoin">BTC/USDT</h3>
                <div style="color: #00ff88; font-size: 14px;" id="currentPrice">$0.00</div>
            </div>

            <!-- Frequency -->
            <h4>üïê Investment Frequency</h4>
            <div class="bubble-grid">
                <div class="param-bubble" data-param="frequency" data-value="1h">1H</div>
                <div class="param-bubble" data-param="frequency" data-value="4h">4H</div>
                <div class="param-bubble" data-param="frequency" data-value="1d">Daily</div>
                <div class="param-bubble" data-param="frequency" data-value="1w">Weekly</div>
                <div class="param-bubble" data-param="frequency" data-value="1m">Monthly</div>
            </div>

            <!-- Amount -->
            <h4>üí∞ Amount per Investment</h4>
            <div class="bubble-grid">
                <div class="param-bubble" data-param="amount" data-value="1">$1</div>
                <div class="param-bubble" data-param="amount" data-value="5">$5</div>
                <div class="param-bubble" data-param="amount" data-value="10">$10</div>
                <div class="param-bubble" data-param="amount" data-value="25">$25</div>
                <div class="param-bubble" data-param="amount" data-value="50">$50</div>
                <div class="param-bubble" data-param="amount" data-value="100">$100</div>
                <div class="param-bubble" data-param="amount" data-value="250">$250</div>
                <div class="param-bubble" data-param="amount" data-value="500">$500</div>
                <input type="number" class="param-bubble" style="background: #0a0a0a;" id="customAmount" placeholder="Custom $" onfocus="this.style.background='#2d2d44'">
            </div>

            <!-- Strategy -->
            <h4>üéØ Trading Strategy</h4>
            <div class="bubble-grid">
                <div class="param-bubble" data-param="strategy" data-value="dca">DCA</div>
                <div class="param-bubble" data-param="strategy" data-value="tp">Take Profit</div>
                <div class="param-bubble" data-param="strategy" data-value="grid">Grid Bot</div>
                <div class="param-bubble" data-param="strategy" data-value="rebalance">Rebalance</div>
            </div>

            <!-- Action Buttons -->
            <button class="btn-bubble" onclick="startAutoInvest()">
                üöÄ START AUTO-INVEST
            </button>
            <button class="btn-bubble" style="background: #ff4444;" onclick="closePanel()">
                ‚úñÔ∏è CANCEL
            </button>
        </div>

        <!-- Portfolio Summary -->
        <div style="background: #1a1a2e; padding: 20px; border-radius: 15px; margin: 10px 0;">
            <h3>üìä Portfolio Analytics</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Coins</div>
                    <div class="stat-value" id="totalCoins">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Active Bots</div>
                    <div class="stat-value" id="activeBotsCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Weekly Profit</div>
                    <div class="stat-value" id="weeklyProfit">+$0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Profit</div>
                    <div class="stat-value" id="totalProfit">+$0</div>
                </div>
            </div>
        </div>

        <!-- Active Bots -->
        <div style="background: #1a1a2e; padding: 20px; border-radius: 15px; margin: 10px 0;">
            <h3>ü§ñ Active Auto-Invests</h3>
            <div id="activeBotsList">
                <p style="text-align: center; color: #888; padding: 20px;">
                    No active auto-invests yet<br>
                    <small>Tap a bubble above to start</small>
                </p>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // Comprehensive Crypto Data (Top 100+ coins)
        const allCryptos = {
            top10: [
                { symbol: 'BTC', name: 'Bitcoin', volume: 28000000000, marketCap: 845000000000 },
                { symbol: 'ETH', name: 'Ethereum', volume: 12000000000, marketCap: 285000000000 },
                { symbol: 'BNB', name: 'Binance Coin', volume: 800000000, marketCap: 48000000000 },
                { symbol: 'SOL', name: 'Solana', volume: 2500000000, marketCap: 42000000000 },
                { symbol: 'XRP', name: 'Ripple', volume: 1500000000, marketCap: 34000000000 },
                { symbol: 'ADA', name: 'Cardano', volume: 500000000, marketCap: 18000000000 },
                { symbol: 'AVAX', name: 'Avalanche', volume: 600000000, marketCap: 14000000000 },
                { symbol: 'DOT', name: 'Polkadot', volume: 400000000, marketCap: 9000000000 },
                { symbol: 'DOGE', name: 'Dogecoin', volume: 800000000, marketCap: 12000000000 },
                { symbol: 'MATIC', name: 'Polygon', volume: 300000000, marketCap: 8000000000 }
            ],
            top20: [
                // Top 10 + next 10
                { symbol: 'LTC', name: 'Litecoin', volume: 400000000, marketCap: 6500000000 },
                { symbol: 'LINK', name: 'Chainlink', volume: 350000000, marketCap: 8500000000 },
                { symbol: 'ATOM', name: 'Cosmos', volume: 200000000, marketCap: 4500000000 },
                { symbol: 'XLM', name: 'Stellar', volume: 180000000, marketCap: 3800000000 },
                { symbol: 'BCH', name: 'Bitcoin Cash', volume: 220000000, marketCap: 5200000000 },
                { symbol: 'ETC', name: 'Ethereum Classic', volume: 150000000, marketCap: 3500000000 },
                { symbol: 'XMR', name: 'Monero', volume: 120000000, marketCap: 2800000000 },
                { symbol: 'FIL', name: 'Filecoin', volume: 90000000, marketCap: 2200000000 },
                { symbol: 'ALGO', name: 'Algorand', volume: 80000000, marketCap: 1800000000 },
                { symbol: 'EOS', name: 'EOS', volume: 110000000, marketCap: 2400000000 }
            ],
            top50: [
                // Additional 30 coins for top 50
                { symbol: 'NEAR', name: 'Near Protocol', volume: 70000000, marketCap: 1200000000 },
                { symbol: 'VET', name: 'VeChain', volume: 60000000, marketCap: 900000000 },
                { symbol: 'ICP', name: 'Internet Computer', volume: 50000000, marketCap: 800000000 },
                { symbol: 'XTZ', name: 'Tezos', volume: 40000000, marketCap: 700000000 },
                { symbol: 'AAVE', name: 'Aave', volume: 80000000, marketCap: 1100000000 },
                { symbol: 'MKR', name: 'Maker', volume: 45000000, marketCap: 750000000 },
                { symbol: 'SUSHI', name: 'SushiSwap', volume: 30000000, marketCap: 400000000 },
                { symbol: 'COMP', name: 'Compound', volume: 35000000, marketCap: 500000000 },
                { symbol: 'YFI', name: 'Yearn Finance', volume: 25000000, marketCap: 350000000 },
                { symbol: 'SNX', name: 'Synthetix', volume: 20000000, marketCap: 300000000 },
                // Add 20 more...
                { symbol: 'GRT', name: 'The Graph', volume: 55000000, marketCap: 850000000 },
                { symbol: 'RUNE', name: 'THORChain', volume: 48000000, marketCap: 720000000 },
                { symbol: 'FTM', name: 'Fantom', volume: 52000000, marketCap: 780000000 },
                { symbol: 'MANA', name: 'Decentraland', volume: 38000000, marketCap: 580000000 },
                { symbol: 'SAND', name: 'The Sandbox', volume: 42000000, marketCap: 650000000 },
                { symbol: 'CRV', name: 'Curve DAO', volume: 32000000, marketCap: 480000000 },
                { symbol: 'ENJ', name: 'Enjin Coin', volume: 28000000, marketCap: 420000000 },
                { symbol: 'BAT', name: 'Basic Attention', volume: 25000000, marketCap: 380000000 },
                { symbol: 'ZEC', name: 'Zcash', volume: 22000000, marketCap: 350000000 },
                { symbol: 'DASH', name: 'Dash', volume: 18000000, marketCap: 320000000 }
            ],
            top100: [
                // Additional 50 coins for top 100
                { symbol: 'KSM', name: 'Kusama', volume: 15000000, marketCap: 250000000 },
                { symbol: 'WAVES', name: 'Waves', volume: 12000000, marketCap: 200000000 },
                { symbol: 'OMG', name: 'OMG Network', volume: 10000000, marketCap: 180000000 },
                { symbol: 'IOTA', name: 'IOTA', volume: 9000000, marketCap: 160000000 },
                { symbol: 'ZIL', name: 'Zilliqa', volume: 8000000, marketCap: 140000000 },
                { symbol: 'ONE', name: 'Harmony', volume: 7000000, marketCap: 120000000 },
                { symbol: 'CELO', name: 'Celo', volume: 6000000, marketCap: 100000000 },
                // Add many more...
            ],
            custom: [] // User-added coins
        };

        let currentTab = 'top10';
        let currentSelection = {
            coin: null,
            frequency: null,
            amount: null,
            strategy: 'dca'
        };

        let portfolioStats = {
            totalInvested: 0,
            currentValue: 0,
            dailyProfit: 0,
            weeklyProfit: 0,
            monthlyProfit: 0,
            totalProfit: 0,
            totalCoins: 0,
            activeBots: 0
        };

        // Initialize App
        function initializeApp() {
            loadBubbles(currentTab);
            updatePortfolioStats();
            updateActiveBotsList();
            startLiveUpdates();
        }

        // Load bubbles based on selected tab
        function loadBubbles(tab) {
            const container = document.getElementById('bubblesContainer');
            const coins = [...allCryptos[tab], ...allCryptos.custom];
            
            container.innerHTML = '';
            
            if (coins.length === 0) {
                container.innerHTML = '<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #888;">No coins found</div>';
                return;
            }

            coins.forEach((coin, index) => {
                const bubble = createBubble(coin, index, coins.length);
                container.appendChild(bubble);
            });
        }

        // Create individual bubble
        function createBubble(coin, index, totalCoins) {
            const bubble = document.createElement('div');
            const bubbleSize = getBubbleSize(coin.marketCap);
            const position = getBubblePosition(index, totalCoins);
            
            // Add random price data for simulation
            if (!coin.price) {
                coin.price = (Math.random() * 1000).toFixed(2);
                coin.change = (Math.random() * 10 - 5).toFixed(2);
            }
            
            bubble.className = `coin-bubble ${bubbleSize}`;
            bubble.style.left = `${position.x}%`;
            bubble.style.top = `${position.y}%`;
            bubble.style.animationDelay = `${index * 0.1}s`;
            
            // Volume indicator
            const volumeDot = document.createElement('div');
            volumeDot.className = `volume-pulse ${getVolumeClass(coin.volume)}`;
            
            bubble.innerHTML = `
                <div style="font-weight: bold; font-size: ${getFontSize(coin.marketCap)}; margin-bottom: 5px;">
                    ${coin.symbol}
                </div>
                <div style="font-size: ${getPriceSize(coin.marketCap)}; color: #00ff88;">
                    $${coin.price}
                </div>
                <div style="font-size: 10px; color: ${coin.change >= 0 ? '#00ff88' : '#ff4444'}; margin-top: 2px;">
                    ${coin.change >= 0 ? '‚Üó' : '‚Üò'} ${Math.abs(coin.change)}%
                </div>
            `;
            
            bubble.appendChild(volumeDot);
            bubble.addEventListener('click', () => selectCoin(coin));
            return bubble;
        }

        // Switch between tabs
        function switchTab(tab) {
            currentTab = tab;
            
            // Update active tab
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show/hide custom panel
            document.getElementById('customPanel').style.display = tab === 'custom' ? 'block' : 'none';
            
            // Load appropriate bubbles
            loadBubbles(tab);
        }

        // Add custom coin
        function addCustomCoin() {
            const searchInput = document.getElementById('coinSearch');
            const coinSymbol = searchInput.value.trim().toUpperCase();
            
            if (!coinSymbol) {
                tg.showAlert('Please enter a coin symbol');
                return;
            }
            
            // Check if coin already exists
            const allCoins = [...allCryptos.top10, ...allCryptos.top20, ...allCryptos.top50, ...allCryptos.top100, ...allCryptos.custom];
            if (allCoins.find(c => c.symbol === coinSymbol)) {
                tg.showAlert(`${coinSymbol} already exists in the list`);
                return;
            }
            
            // Add to custom coins
            const newCoin = {
                symbol: coinSymbol,
                name: coinSymbol,
                volume: 10000000,
                marketCap: 50000000,
                price: (Math.random() * 100).toFixed(2),
                change: (Math.random() * 10 - 5).toFixed(2)
            };
            
            allCryptos.custom.push(newCoin);
            searchInput.value = '';
            
            // Reload bubbles if on custom tab
            if (currentTab === 'custom') {
                loadBubbles('custom');
            }
            
            tg.showAlert(`‚úÖ ${coinSymbol} added to your coins!`);
        }

        // Select coin for trading
        function selectCoin(coin) {
            currentSelection.coin = coin;
            
            // Update panel
            document.getElementById('selectedCoin').textContent = `${coin.symbol}/USDT`;
            document.getElementById('currentPrice').textContent = `$${coin.price}`;
            document.getElementById('tradePanel').style.display = 'block';
            
            // Scroll to panel
            document.getElementById('tradePanel').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
            
            resetSelections();
        }

        // Start auto-invest
        function startAutoInvest() {
            if (!validateSelection()) return;
            
            const amount = currentSelection.amount || document.getElementById('customAmount').value;
            if (!amount) {
                tg.showAlert('Please select or enter an amount');
                return;
            }

            const botConfig = {
                id: Date.now(),
                coin: currentSelection.coin.symbol,
                frequency: currentSelection.frequency,
                amount: parseFloat(amount),
                strategy: currentSelection.strategy,
                status: 'active',
                nextTrade: calculateNextTradeTime(currentSelection.frequency),
                totalInvested: 0,
                profit: 0,
                createdAt: new Date().toLocaleString()
            };
            
            saveBot(botConfig);
            
            // Update stats
            portfolioStats.totalInvested += parseFloat(amount);
            portfolioStats.activeBots++;
            updatePortfolioStats();
            
            tg.showAlert(`üéâ ${botConfig.coin} Auto-Invest Started!\n\n$${botConfig.amount} every ${getFrequencyText(botConfig.frequency)}`);
            
            closePanel();
            updateActiveBotsList();
        }

        // Update portfolio statistics
        function updatePortfolioStats() {
            const bots = JSON.parse(localStorage.getItem('cryptoBubbleBots') || '[]');
            const totalInvested = bots.reduce((sum, bot) => sum + bot.totalInvested, 0);
            
            // Simulate profit calculations
            portfolioStats.totalInvested = totalInvested;
            portfolioStats.currentValue = totalInvested * (1 + Math.random() * 0.1);
            portfolioStats.dailyProfit = totalInvested * (Math.random() * 0.02);
            portfolioStats.weeklyProfit = totalInvested * (Math.random() * 0.05);
            portfolioStats.monthlyProfit = totalInvested * (Math.random() * 0.15);
            portfolioStats.totalProfit = portfolioStats.currentValue - totalInvested;
            portfolioStats.totalCoins = new Set(bots.map(bot => bot.coin)).size;
            portfolioStats.activeBots = bots.length;
            
            // Update UI
            document.getElementById('totalInvested').textContent = `$${portfolioStats.totalInvested.toFixed(2)}`;
            document.getElementById('currentValue').textContent = `$${portfolioStats.currentValue.toFixed(2)}`;
            document.getElementById('dailyProfit').textContent = `+$${portfolioStats.dailyProfit.toFixed(2)}`;
            document.getElementById('monthlyProfit').textContent = `+$${portfolioStats.monthlyProfit.toFixed(2)}`;
            document.getElementById('weeklyProfit').textContent = `+$${portfolioStats.weeklyProfit.toFixed(2)}`;
            document.getElementById('totalProfit').textContent = `+$${portfolioStats.totalProfit.toFixed(2)}`;
            document.getElementById('totalCoins').textContent = portfolioStats.totalCoins;
            document.getElementById('activeBotsCount').textContent = portfolioStats.activeBots;
        }

        // Update active bots list
        function updateActiveBotsList() {
            const bots = JSON.parse(localStorage.getItem('cryptoBubbleBots') || '[]');
            const container = document.getElementById('activeBotsList');
            
            if (bots.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">No active auto-invests yet<br><small>Tap a bubble above to start</small></p>';
                return;
            }
            
            container.innerHTML = bots.map(bot => `
                <div style="background: #2d2d44; padding: 15px; border-radius: 12px; margin: 10px 0; border-left: 4px solid #00ff88;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="font-size: 16px;">${bot.coin}</strong>
                            <div style="font-size: 12px; color: #888;">
                                $${bot.amount} ‚Ä¢ Every ${getFrequencyText(bot.frequency)} ‚Ä¢ ${bot.strategy.toUpperCase()}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <span style="color: #00ff88; font-size: 12px;">${bot.status}</span>
                            <div style="font-size: 10px; color: #666;">
                                Next: ${new Date(bot.nextTrade).toLocaleTimeString()}
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 11px;">
                        <span>Invested: $${bot.totalInvested || 0}</span>
                        <span style="color: #00ff88;">Profit: +$${bot.profit || 0}</span>
                    </div>
                </div>
            `).join('');
        }

        // Live price updates
        function startLiveUpdates() {
            setInterval(() => {
                // Update all coin prices
                Object.values(allCryptos).flat().forEach(coin => {
                    if (coin.price) {
                        const change = (Math.random() - 0.5) * 2;
                        coin.price = Math.max(0.0001, coin.price * (1 + change/100));
                        coin.change = (Math.random() * 10 - 5).toFixed(2);
                    }
                });
                
                // Reload bubbles and update stats
                loadBubbles(currentTab);
                updatePortfolioStats();
            }, 5000);
        }

        // Helper functions (same as before with improvements)
        function getBubbleSize(marketCap) {
            if (marketCap > 100000000000) return 'bubble-xlarge';
            if (marketCap > 10000000000) return 'bubble-large';
            if (marketCap > 1000000000) return 'bubble-medium';
            if (marketCap > 100000000) return 'bubble-small';
            return 'bubble-tiny';
        }

        function getBubblePosition(index, total) {
            const positions = [];
            for (let i = 0; i < total; i++) {
                const angle = (i / total) * 2 * Math.PI;
                const radius = 30 + (Math.random() * 20);
                positions.push({
                    x: 50 + radius * Math.cos(angle),
                    y: 50 + radius * Math.sin(angle)
                });
            }
            return positions[index] || { x: 50, y: 50 };
        }

        // [Include all other helper functions from previous version...]

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);

    </script>
</body>
</html>
