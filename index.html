<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üèóÔ∏è Road Project Assistant - Kanditheemu</title>
    <style>
        /* Mobile First Design */
        :root {
            --primary: #2E7D32; /* Green for construction/environment */
            --secondary: #1565C0; /* Blue for infrastructure */
            --accent: #FF9800; /* Orange for warnings/alerts */
            --danger: #D32F2F;
            --warning: #FFA000;
            --success: #388E3C;
            --dark: #263238;
            --light: #F5F7FA;
            --border: #CFD8DC;
            --card-bg: white;
            --text: #37474F;
            --text-light: #78909C;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dark: #121212;
                --light: #1E1E1E;
                --border: #444;
                --card-bg: #2D2D2D;
                --text: #FFFFFF;
                --text-light: #B0BEC5;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light);
            color: var(--text);
            font-size: 15px;
            line-height: 1.5;
            overflow-x: hidden;
        }

        /* Header */
        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .app-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .project-info {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Tabs */
        .tabs {
            display: flex;
            overflow-x: auto;
            gap: 5px;
            margin-top: 10px;
            padding-bottom: 5px;
            scrollbar-width: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 8px 16px;
            background: rgba(255,255,255,0.15);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 13px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab.active {
            background: white;
            color: var(--primary);
            font-weight: 600;
        }

        /* Main Content */
        .container {
            padding: 15px;
            padding-bottom: 80px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .stat-progress { background: #E8F5E9; color: var(--success); }
        .stat-materials { background: #E3F2FD; color: var(--secondary); }
        .stat-safety { background: #FFF3E0; color: var(--warning); }
        .stat-budget { background: #F3E5F5; color: #7B1FA2; }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin: 5px 0;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .action-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .action-icon {
            font-size: 22px;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-daily { background: #E8F5E9; color: var(--success); }
        .action-material { background: #E3F2FD; color: var(--secondary); }
        .action-safety { background: #FFF3E0; color: var(--warning); }
        .action-meeting { background: #F3E5F5; color: #7B1FA2; }
        .action-report { background: #E0F2F1; color: #00796B; }
        .action-community { background: #FFF8E1; color: #FF8F00; }
        .action-photo { background: #E8EAF6; color: #3949AB; }
        .action-weather { background: #E0F7FA; color: #0097A7; }
        .action-checklist { background: #FCE4EC; color: #C2185B; }

        .action-text {
            font-size: 12px;
            text-align: center;
            font-weight: 500;
            line-height: 1.3;
        }

        /* Section Cards */
        .section-card {
            background: var(--card-bg);
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .section-header {
            padding: 15px;
            background: var(--light);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .view-all {
            color: var(--primary);
            font-size: 13px;
            text-decoration: none;
            font-weight: 500;
        }

        .section-body {
            padding: 15px;
        }

        /* List Items */
        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .item-info {
            flex: 1;
        }

        .item-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .item-subtitle {
            font-size: 12px;
            color: var(--text-light);
        }

        .item-status {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
        }

        .status-completed { background: #E8F5E9; color: var(--success); }
        .status-inprogress { background: #E3F2FD; color: var(--secondary); }
        .status-delayed { background: #FFEBEE; color: var(--danger); }
        .status-pending { background: #FFF3E0; color: var(--warning); }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 1px solid var(--border);
            display: flex;
            padding: 10px 5px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 11px;
            padding: 8px 5px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .nav-item.active {
            color: var(--primary);
            font-weight: 600;
        }

        .nav-icon {
            font-size: 20px;
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 15px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: var(--card-bg);
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            max-height: 85vh;
            overflow: hidden;
            animation: slideUp 0.3s;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
            max-height: 60vh;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: var(--text);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--card-bg);
            color: var(--text);
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        /* Buttons */
        .btn {
            padding: 14px 20px;
            border-radius: 10px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
            width: 100%;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1B5E20;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--dark);
            color: white;
            padding: 14px 24px;
            border-radius: 12px;
            z-index: 3000;
            opacity: 0;
            transition: all 0.3s;
            max-width: 90%;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success { background: var(--success); }
        .toast.warning { background: var(--warning); }
        .toast.error { background: var(--danger); }
        .toast.info { background: var(--secondary); }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-light);
        }

        /* Photo Grid */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 15px;
        }

        .photo-item {
            aspect-ratio: 1;
            background: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            overflow: hidden;
            position: relative;
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-add {
            border: 2px dashed var(--border);
            background: var(--light);
        }

        /* Calendar */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-day.active {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        .calendar-day.today {
            background: var(--accent);
            color: white;
            font-weight: 600;
        }

        /* Weather Widget */
        .weather-widget {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #1E88E5 0%, #0D47A1 100%);
            color: white;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .weather-icon {
            font-size: 40px;
        }

        .weather-temp {
            font-size: 32px;
            font-weight: 700;
        }

        .weather-details {
            flex: 1;
        }

        .weather-condition {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Safety Checklist */
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checklist-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        /* Prayer Times */
        .prayer-times {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .prayer-item {
            text-align: center;
            padding: 12px;
            background: var(--light);
            border-radius: 10px;
        }

        .prayer-name {
            font-size: 12px;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .prayer-time {
            font-weight: 700;
            font-size: 16px;
        }

        /* Photo Viewer */
        .photo-viewer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 3000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .photo-viewer.active {
            display: flex;
        }

        .photo-viewer img {
            max-width: 90%;
            max-height: 70%;
            border-radius: 8px;
        }

        .photo-caption {
            color: white;
            margin-top: 20px;
            font-size: 16px;
        }

        .photo-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Responsive */
        @media (max-width: 360px) {
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 800px;
                margin: 0 auto;
            }
        }

        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: var(--text-light);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Report List */
        .report-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .report-item {
            padding: 15px;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
        }

        .report-date {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .report-content {
            font-size: 14px;
            color: var(--text);
        }

        /* Data Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .data-table th {
            text-align: left;
            padding: 12px;
            background: var(--light);
            border-bottom: 2px solid var(--border);
            color: var(--text-light);
            font-weight: 600;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .data-table tr:hover {
            background: var(--light);
        }
    </style>
</head>
<body>
    <!-- App Container -->
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-top">
                <div class="app-title">
                    <span>üèóÔ∏è Road Project Assistant</span>
                </div>
                <div class="project-info">
                    Kanditheemu Infrastructure
                </div>
            </div>
            
            <!-- Weather Widget -->
            <div class="weather-widget" id="weather-widget">
                <div class="weather-icon">‚òÄÔ∏è</div>
                <div class="weather-details">
                    <div class="weather-temp">28¬∞C</div>
                    <div class="weather-condition">Sunny ‚Ä¢ Good for work</div>
                </div>
                <div style="font-size: 12px; opacity: 0.8;">
                    Kanditheemu<br>07:30 AM
                </div>
            </div>
            
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab active" onclick="switchTab('today')">Today</button>
                <button class="tab" onclick="switchTab('week')">This Week</button>
                <button class="tab" onclick="switchTab('month')">This Month</button>
                <button class="tab" onclick="switchTab('overview')">Overview</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container">
            <!-- Dashboard Content -->
            <div id="dashboard-content">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-progress">üìà</div>
                        <div class="stat-value" id="progress-value">65%</div>
                        <div class="stat-label">Project Progress</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon stat-materials">üì¶</div>
                        <div class="stat-value" id="material-delivered">42</div>
                        <div class="stat-label">Materials Today</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon stat-safety">üõ°Ô∏è</div>
                        <div class="stat-value" id="safety-score">98%</div>
                        <div class="stat-label">Safety Score</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon stat-budget">üí∞</div>
                        <div class="stat-value" id="budget-used">72%</div>
                        <div class="stat-label">Budget Used</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="action-btn" onclick="openDailyReport()">
                        <div class="action-icon action-daily">üìù</div>
                        <div class="action-text">Daily Report</div>
                    </button>
                    
                    <button class="action-btn" onclick="openMaterialTracking()">
                        <div class="action-icon action-material">üì¶</div>
                        <div class="action-text">Material Tracking</div>
                    </button>
                    
                    <button class="action-btn" onclick="openSafetyCheck()">
                        <div class="action-icon action-safety">üõ°Ô∏è</div>
                        <div class="action-text">Safety Check</div>
                    </button>
                    
                    <button class="action-btn" onclick="openMeetingNotes()">
                        <div class="action-icon action-meeting">ü§ù</div>
                        <div class="action-text">Meeting Notes</div>
                    </button>
                    
                    <button class="action-btn" onclick="openProgressReport()">
                        <div class="action-icon action-report">üìä</div>
                        <div class="action-text">Progress Report</div>
                    </button>
                    
                    <button class="action-btn" onclick="openCommunityNotes()">
                        <div class="action-icon action-community">üèùÔ∏è</div>
                        <div class="action-text">Community Notes</div>
                    </button>
                    
                    <button class="action-btn" onclick="openSitePhotos()">
                        <div class="action-icon action-photo">üì∏</div>
                        <div class="action-text">Site Photos</div>
                    </button>
                    
                    <button class="action-btn" onclick="openWeatherLog()">
                        <div class="action-icon action-weather">üå§Ô∏è</div>
                        <div class="action-text">Weather Log</div>
                    </button>
                    
                    <button class="action-btn" onclick="openDailyChecklist()">
                        <div class="action-icon action-checklist">‚úÖ</div>
                        <div class="action-text">Daily Checklist</div>
                    </button>
                </div>

                <!-- Today's Tasks -->
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üìã Today's Tasks</div>
                        <a href="#" class="view-all" onclick="showAllTasks()">View All</a>
                    </div>
                    <div class="section-body" id="today-tasks">
                        <!-- Tasks loaded dynamically -->
                    </div>
                </div>

                <!-- Recent Site Photos -->
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üì∏ Recent Site Photos</div>
                        <a href="#" class="view-all" onclick="openGallery()">View All</a>
                    </div>
                    <div class="section-body">
                        <div class="photo-grid" id="recent-photos">
                            <div class="photo-item" onclick="viewPhoto('Site Progress - Day 45', 'üèóÔ∏è')">
                                <div style="font-size: 32px;">üèóÔ∏è</div>
                            </div>
                            <div class="photo-item" onclick="viewPhoto('Drainage Work', 'üõ†Ô∏è')">
                                <div style="font-size: 32px;">üõ†Ô∏è</div>
                            </div>
                            <div class="photo-item" onclick="viewPhoto('Road Base Layer', 'üõ£Ô∏è')">
                                <div style="font-size: 32px;">üõ£Ô∏è</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Material Delivery Schedule -->
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üöö Upcoming Deliveries</div>
                        <a href="#" class="view-all" onclick="openDeliverySchedule()">Schedule</a>
                    </div>
                    <div class="section-body" id="upcoming-deliveries">
                        <!-- Deliveries loaded dynamically -->
                    </div>
                </div>

                <!-- Community Feedback -->
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üèùÔ∏è Community Feedback</div>
                        <a href="#" class="view-all" onclick="openCommunityPortal()">Portal</a>
                    </div>
                    <div class="section-body" id="community-feedback">
                        <!-- Feedback loaded dynamically -->
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports-content" style="display: none;">
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üìä Project Reports</div>
                        <button class="btn btn-primary" onclick="generateMonthlyReport()">Generate Monthly Report</button>
                    </div>
                    <div class="section-body">
                        <div class="report-list" id="reports-list">
                            <!-- Reports loaded dynamically -->
                        </div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üìà Progress Analytics</div>
                    </div>
                    <div class="section-body">
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Project Completion</span>
                                <span id="progress-percent">65%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill" style="width: 65%"></div>
                            </div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Budget Utilization</span>
                                <span id="budget-percent">72%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 72%; background: var(--secondary);"></div>
                            </div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Safety Compliance</span>
                                <span id="safety-percent">98%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 98%; background: var(--success);"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Materials Section -->
            <div id="materials-content" style="display: none;">
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üì¶ Material Inventory</div>
                        <button class="btn btn-primary" onclick="openMaterialTracking()">+ Add Delivery</button>
                    </div>
                    <div class="section-body">
                        <table class="data-table" id="materials-table">
                            <thead>
                                <tr>
                                    <th>Material</th>
                                    <th>Quantity</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="materials-table-body">
                                <!-- Materials loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üìÖ Delivery Schedule</div>
                        <button class="btn btn-outline" onclick="openDeliverySchedule()">Full Schedule</button>
                    </div>
                    <div class="section-body">
                        <div id="delivery-schedule">
                            <!-- Delivery schedule loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Safety Section -->
            <div id="safety-content" style="display: none;">
                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üõ°Ô∏è Safety Dashboard</div>
                        <button class="btn btn-primary" onclick="openSafetyCheck()">+ New Safety Check</button>
                    </div>
                    <div class="section-body">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon stat-safety">‚úÖ</div>
                                <div class="stat-value" id="safety-checks-today">3</div>
                                <div class="stat-label">Checks Today</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon stat-safety">üìÖ</div>
                                <div class="stat-value" id="safety-streak">14</div>
                                <div class="stat-label">Days No Incident</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon stat-safety">‚ö†Ô∏è</div>
                                <div class="stat-value" id="safety-issues">2</div>
                                <div class="stat-label">Open Issues</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon stat-safety">üë∑</div>
                                <div class="stat-value" id="safety-trained">24</div>
                                <div class="stat-label">Workers Trained</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üìã Recent Safety Checks</div>
                        <a href="#" class="view-all" onclick="viewAllSafetyChecks()">View All</a>
                    </div>
                    <div class="section-body">
                        <div id="safety-checks-list">
                            <!-- Safety checks loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- More Section -->
            <div id="more-content" style="display: none;">
                <div class="quick-actions">
                    <button class="action-btn" onclick="exportData()">
                        <div class="action-icon" style="background: #E3F2FD; color: var(--secondary);">üì§</div>
                        <div class="action-text">Export Data</div>
                    </button>
                    
                    <button class="action-btn" onclick="backupData()">
                        <div class="action-icon" style="background: #E8F5E9; color: var(--success);">üíæ</div>
                        <div class="action-text">Backup</div>
                    </button>
                    
                    <button class="action-btn" onclick="resetData()">
                        <div class="action-icon" style="background: #FFEBEE; color: var(--danger);">üîÑ</div>
                        <div class="action-text">Reset Data</div>
                    </button>
                    
                    <button class="action-btn" onclick="showSettings()">
                        <div class="action-icon" style="background: #F3E5F5; color: #7B1FA2;">‚öôÔ∏è</div>
                        <div class="action-text">Settings</div>
                    </button>
                    
                    <button class="action-btn" onclick="showHelp()">
                        <div class="action-icon" style="background: #FFF3E0; color: var(--warning);">‚ùì</div>
                        <div class="action-text">Help</div>
                    </button>
                    
                    <button class="action-btn" onclick="showAbout()">
                        <div class="action-icon" style="background: #E0F2F1; color: #00796B;">‚ÑπÔ∏è</div>
                        <div class="action-text">About</div>
                    </button>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üïå Prayer Times (Kanditheemu)</div>
                    </div>
                    <div class="section-body">
                        <div class="prayer-times">
                            <div class="prayer-item">
                                <div class="prayer-name">Fajr</div>
                                <div class="prayer-time">05:15</div>
                            </div>
                            <div class="prayer-item">
                                <div class="prayer-name">Dhuhr</div>
                                <div class="prayer-time">12:30</div>
                            </div>
                            <div class="prayer-item">
                                <div class="prayer-name">Asr</div>
                                <div class="prayer-time">15:45</div>
                            </div>
                            <div class="prayer-item">
                                <div class="prayer-name">Maghrib</div>
                                <div class="prayer-time">18:20</div>
                            </div>
                            <div class="prayer-item">
                                <div class="prayer-name">Isha</div>
                                <div class="prayer-time">19:45</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <div class="section-title">üìû Emergency Contacts</div>
                    </div>
                    <div class="section-body">
                        <div class="list-item">
                            <div class="item-info">
                                <div class="item-title">Project Manager</div>
                                <div class="item-subtitle">Ahmed Rasheed</div>
                            </div>
                            <button class="btn btn-outline" onclick="callContact('+960-1234567')">üìû Call</button>
                        </div>
                        
                        <div class="list-item">
                            <div class="item-info">
                                <div class="item-title">Site Supervisor</div>
                                <div class="item-subtitle">Ibrahim Mohamed</div>
                            </div>
                            <button class="btn btn-outline" onclick="callContact('+960-9876543')">üìû Call</button>
                        </div>
                        
                        <div class="list-item">
                            <div class="item-info">
                                <div class="item-title">Emergency</div>
                                <div class="item-subtitle">Hospital / Police</div>
                            </div>
                            <button class="btn btn-danger" onclick="callContact('119')">üö® Emergency</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="switchSection('dashboard')">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-item" onclick="switchSection('reports')">
                <span class="nav-icon">üìù</span>
                <span>Reports</span>
            </button>
            <button class="nav-item" onclick="switchSection('materials')">
                <span class="nav-icon">üì¶</span>
                <span>Materials</span>
            </button>
            <button class="nav-item" onclick="switchSection('safety')">
                <span class="nav-icon">üõ°Ô∏è</span>
                <span>Safety</span>
            </button>
            <button class="nav-item" onclick="switchSection('more')">
                <span class="nav-icon">‚ãØ</span>
                <span>More</span>
            </button>
        </nav>
    </div>

    <!-- Modals -->
    
    <!-- Daily Report Modal -->
    <div class="modal-overlay" id="daily-report-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">üìù Daily Site Report</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="report-date" value="">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Weather Conditions</label>
                    <select class="form-select" id="weather-condition">
                        <option value="sunny">‚òÄÔ∏è Sunny - Good for work</option>
                        <option value="partly-cloudy">‚õÖ Partly Cloudy</option>
                        <option value="rainy">üåßÔ∏è Rainy - Delays possible</option>
                        <option value="stormy">‚õàÔ∏è Stormy - Work stopped</option>
                        <option value="windy">üí® Windy - Caution needed</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Workers Present</label>
                    <input type="number" class="form-input" id="workers-present" placeholder="Number of workers">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Work Completed Today</label>
                    <textarea class="form-textarea" id="work-completed" placeholder="Example: Laid 50m of drainage pipe near school, compacted road base section..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Materials Used/Delivered</label>
                    <textarea class="form-textarea" id="materials-used" placeholder="Example: Received 50 cement bags, used 20 bags for drainage..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Issues/Delays</label>
                    <textarea class="form-textarea" id="issues-reported" placeholder="Any problems, delays, or concerns..." rows="2"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Safety Observations</label>
                    <textarea class="form-textarea" id="safety-observations" placeholder="Safety checks, incidents, or concerns..." rows="2"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveDailyReport()">
                    üíæ Save Daily Report
                </button>
            </div>
        </div>
    </div>

    <!-- Safety Checklist Modal -->
    <div class="modal-overlay" id="safety-checklist-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">üõ°Ô∏è Daily Safety Checklist</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date & Time</label>
                    <input type="datetime-local" class="form-input" id="safety-check-time">
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">All workers wearing safety helmets</div>
                        <div class="item-subtitle">Required at all times on site</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Safety signage properly placed</div>
                        <div class="item-subtitle">Warning signs visible to public</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Equipment in safe condition</div>
                        <div class="item-subtitle">No damaged tools/machinery</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">First aid kit available & stocked</div>
                        <div class="item-subtitle">Check expiry dates</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Excavations properly supported</div>
                        <div class="item-subtitle">No risk of collapse</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Public access properly controlled</div>
                        <div class="item-subtitle">Barricades in place</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Safety Concerns / Notes</label>
                    <textarea class="form-textarea" id="safety-notes" placeholder="Any safety issues observed..." rows="3"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveSafetyChecklist()">
                    ‚úÖ Complete Safety Check
                </button>
            </div>
        </div>
    </div>

    <!-- Material Tracking Modal -->
    <div class="modal-overlay" id="material-tracking-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">üì¶ Material Delivery Tracking</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Material Type</label>
                    <select class="form-select" id="material-type">
                        <option value="">Select material</option>
                        <option value="cement">Cement (bags)</option>
                        <option value="sand">Sand (cubic meters)</option>
                        <option value="gravel">Gravel (tons)</option>
                        <option value="pipes">Drainage Pipes (meters)</option>
                        <option value="asphalt">Asphalt (tons)</option>
                        <option value="rebar">Steel Rebar (pieces)</option>
                        <option value="tools">Tools/Equipment</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Quantity</label>
                        <input type="number" class="form-input" id="material-quantity" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unit</label>
                        <select class="form-select" id="material-unit">
                            <option value="bags">Bags</option>
                            <option value="tons">Tons</option>
                            <option value="m3">Cubic Meters</option>
                            <option value="meters">Meters</option>
                            <option value="pieces">Pieces</option>
                            <option value="liters">Liters</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Supplier/Vendor</label>
                    <input type="text" class="form-input" id="material-supplier" placeholder="Supplier name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Delivery Time</label>
                    <input type="datetime-local" class="form-input" id="delivery-time">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Received By</label>
                    <input type="text" class="form-input" id="received-by" placeholder="Your name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Condition/Quality Check</label>
                    <select class="form-select" id="material-quality">
                        <option value="excellent">‚úÖ Excellent - No issues</option>
                        <option value="good">üëç Good - Minor issues</option>
                        <option value="poor">‚ö†Ô∏è Poor - Some damage</option>
                        <option value="rejected">‚ùå Rejected - Return to supplier</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Storage Location</label>
                    <input type="text" class="form-input" id="storage-location" placeholder="Where stored on site">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notes/Comments</label>
                    <textarea class="form-textarea" id="material-notes" placeholder="Any special notes..." rows="2"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveMaterialDelivery()">
                    üì¶ Record Delivery
                </button>
            </div>
        </div>
    </div>

    <!-- Community Notes Modal -->
    <div class="modal-overlay" id="community-notes-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">üèùÔ∏è Community Interaction Notes</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date & Time</label>
                    <input type="datetime-local" class="form-input" id="community-meeting-time">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Person/Group</label>
                    <input type="text" class="form-input" id="community-person" placeholder="Name of person or group">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Contact Method</label>
                    <select class="form-select" id="contact-method">
                        <option value="in-person">üë• In-person meeting</option>
                        <option value="phone">üìû Phone call</option>
                        <option value="visit">üè† Site visit</option>
                        <option value="complaint">‚ö†Ô∏è Complaint received</option>
                        <option value="suggestion">üí° Suggestion/Feedback</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Topic/Concern</label>
                    <select class="form-select" id="concern-topic">
                        <option value="noise">üîä Noise disturbance</option>
                        <option value="access">üöß Access blocked</option>
                        <option value="safety">‚ö†Ô∏è Safety concerns</option>
                        <option value="schedule">üìÖ Project schedule</option>
                        <option value="damage">üè° Property concerns</option>
                        <option value="other">üìù Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Details of Discussion</label>
                    <textarea class="form-textarea" id="discussion-details" placeholder="What was discussed? What concerns were raised?..." rows="4"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Action Taken/Response</label>
                    <textarea class="form-textarea" id="action-taken" placeholder="How did you respond? What action was agreed?..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Follow-up Required?</label>
                    <select class="form-select" id="followup-required">
                        <option value="no">‚ùå No follow-up needed</option>
                        <option value="tomorrow">üìÖ Follow up tomorrow</option>
                        <option value="week">üìÖ Follow up this week</option>
                        <option value="manager">üë®‚Äçüíº Report to manager</option>
                        <option value="urgent">üö® Urgent - Immediate action</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Community Member's Contact</div>
                    <input type="text" class="form-input" id="community-contact" placeholder="Phone number or other contact">
                </div>
                
                <button class="btn btn-primary" onclick="saveCommunityNotes()">
                    üíæ Save Community Notes
                </button>
                
                <button class="btn btn-outline" style="margin-top: 10px;" onclick="showDuas()">
                    ü§≤ Show Islamic Duas for Communication
                </button>
            </div>
        </div>
    </div>

    <!-- Meeting Notes Modal -->
    <div class="modal-overlay" id="meeting-notes-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">ü§ù Meeting Notes</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Meeting Date & Time</label>
                    <input type="datetime-local" class="form-input" id="meeting-time">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Meeting Type</label>
                    <select class="form-select" id="meeting-type">
                        <option value="daily">üìÖ Daily Site Meeting</option>
                        <option value="weekly">üóìÔ∏è Weekly Progress Meeting</option>
                        <option value="safety">üõ°Ô∏è Safety Meeting</option>
                        <option value="community">üèùÔ∏è Community Meeting</option>
                        <option value="vendor">ü§ù Vendor Meeting</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Attendees</label>
                    <input type="text" class="form-input" id="meeting-attendees" placeholder="Names separated by comma">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Discussion Points</label>
                    <textarea class="form-textarea" id="meeting-discussion" placeholder="Main points discussed..." rows="4"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Decisions Made</label>
                    <textarea class="form-textarea" id="meeting-decisions" placeholder="Decisions and action items..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Next Meeting Date</label>
                    <input type="date" class="form-input" id="next-meeting-date">
                </div>
                
                <button class="btn btn-primary" onclick="saveMeetingNotes()">
                    üíæ Save Meeting Notes
                </button>
            </div>
        </div>
    </div>

    <!-- Progress Report Modal -->
    <div class="modal-overlay" id="progress-report-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">üìä Progress Report</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Report Period</label>
                    <select class="form-select" id="report-period">
                        <option value="weekly">Weekly Report</option>
                        <option value="monthly">Monthly Report</option>
                        <option value="quarterly">Quarterly Report</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Progress Percentage</label>
                    <input type="range" class="form-input" id="progress-percentage" min="0" max="100" value="65" oninput="updateProgressValue(this.value)">
                    <div class="progress-label">
                        <span>Progress</span>
                        <span id="progress-display">65%</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Work Completed This Period</label>
                    <textarea class="form-textarea" id="period-work" placeholder="Summary of work completed..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Challenges Faced</label>
                    <textarea class="form-textarea" id="period-challenges" placeholder="Major challenges or delays..." rows="2"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Next Period Plan</label>
                    <textarea class="form-textarea" id="next-period-plan" placeholder="Plan for next period..." rows="3"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveProgressReport()">
                    üìä Save Progress Report
                </button>
            </div>
        </div>
    </div>

    <!-- Weather Log Modal -->
    <div class="modal-overlay" id="weather-log-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">üå§Ô∏è Weather Log</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="weather-log-date">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Weather Condition</label>
                    <select class="form-select" id="weather-log-condition">
                        <option value="sunny">‚òÄÔ∏è Sunny</option>
                        <option value="partly-cloudy">‚õÖ Partly Cloudy</option>
                        <option value="cloudy">‚òÅÔ∏è Cloudy</option>
                        <option value="rainy">üåßÔ∏è Rainy</option>
                        <option value="stormy">‚õàÔ∏è Stormy</option>
                        <option value="windy">üí® Windy</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Temperature (¬∞C)</label>
                        <input type="number" class="form-input" id="weather-temp" placeholder="28">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Humidity (%)</label>
                        <input type="number" class="form-input" id="weather-humidity" placeholder="65">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Wind Speed (km/h)</label>
                    <input type="number" class="form-input" id="weather-wind" placeholder="15">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Impact on Work</label>
                    <select class="form-select" id="weather-impact">
                        <option value="normal">‚úÖ Normal work possible</option>
                        <option value="reduced">‚ö†Ô∏è Reduced work capacity</option>
                        <option value="delayed">‚è≥ Work delayed</option>
                        <option value="stopped">üõë Work stopped</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea class="form-textarea" id="weather-notes" placeholder="Any weather-related observations..." rows="2"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveWeatherLog()">
                    üå§Ô∏è Save Weather Log
                </button>
            </div>
        </div>
    </div>

    <!-- Daily Checklist Modal -->
    <div class="modal-overlay" id="daily-checklist-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">‚úÖ Daily Checklist</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="checklist-date" value="">
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Site inspection completed</div>
                        <div class="item-subtitle">Morning walkthrough</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Worker attendance recorded</div>
                        <div class="item-subtitle">All workers accounted for</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Equipment checked</div>
                        <div class="item-subtitle">All machinery operational</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Materials verified</div>
                        <div class="item-subtitle">Required materials available</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Safety briefing conducted</div>
                        <div class="item-subtitle">Morning safety talk</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Progress photos taken</div>
                        <div class="item-subtitle">Documentation updated</div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <div class="item-info">
                        <div class="item-title">Community concerns addressed</div>
                        <div class="item-subtitle">Local feedback reviewed</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Additional Notes</label>
                    <textarea class="form-textarea" id="checklist-notes" placeholder="Any additional notes..." rows="2"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveDailyChecklist()">
                    ‚úÖ Complete Daily Checklist
                </button>
            </div>
        </div>
    </div>

    <!-- Photo Viewer -->
    <div class="photo-viewer" id="photo-viewer">
        <button class="photo-close" onclick="closePhotoViewer()">√ó</button>
        <img id="viewer-image" src="" alt="">
        <div class="photo-caption" id="photo-caption"></div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // =================== APP STATE ===================
        let currentTab = 'today';
        let currentSection = 'dashboard';
        let projectData = {};
        
        // =================== INITIALIZATION ===================
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            loadDashboardData();
            updateTime();
            setInterval(updateTime, 60000);
            
            // Set today's date in date inputs
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(input => {
                if (!input.value) input.value = today;
            });
            
            // Set current time in datetime inputs
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.querySelectorAll('input[type="datetime-local"]').forEach(input => {
                if (!input.value) input.value = localDateTime;
            });
        });
        
        function initializeApp() {
            // Load saved data or create default
            const savedData = localStorage.getItem('road_project_data');
            
            if (savedData) {
                projectData = JSON.parse(savedData);
            } else {
                // Create default data structure
                projectData = {
                    project: {
                        name: "Kanditheemu Road Development",
                        location: "Kanditheemu Island",
                        startDate: new Date().toISOString(),
                        progress: 65,
                        budgetUsed: 72,
                        safetyScore: 98,
                        safetyStreak: 14,
                        workersTrained: 24
                    },
                    dailyReports: [
                        {
                            id: 1,
                            date: new Date().toISOString().split('T')[0],
                            weather: "sunny",
                            workers: 18,
                            workCompleted: "Completed drainage work near school area, laid 50m pipes",
                            materials: "Used 20 cement bags, received 50 new bags",
                            issues: "Minor delay due to equipment maintenance",
                            safety: "All safety protocols followed, no incidents",
                            timestamp: new Date().toISOString()
                        }
                    ],
                    materials: [
                        {
                            id: 1,
                            type: "cement",
                            quantity: 50,
                            unit: "bags",
                            supplier: "Maldives Cement Co.",
                            deliveryTime: new Date().toISOString(),
                            receivedBy: "Ahmed Rasheed",
                            quality: "good",
                            storage: "Site Store A",
                            notes: "Good quality cement",
                            timestamp: new Date().toISOString()
                        }
                    ],
                    safetyChecks: [
                        {
                            id: 1,
                            time: new Date().toISOString(),
                            notes: "All safety equipment in good condition",
                            completed: true,
                            timestamp: new Date().toISOString()
                        }
                    ],
                    communityNotes: [
                        {
                            id: 1,
                            time: new Date().toISOString(),
                            person: "Ahmed Ibrahim",
                            contactMethod: "in-person",
                            topic: "access",
                            details: "Concern about access to house during construction",
                            action: "Arranged alternative access route",
                            followup: "no",
                            contact: "+960-1234567",
                            timestamp: new Date().toISOString()
                        }
                    ],
                    meetings: [],
                    progressReports: [],
                    weatherLogs: [],
                    dailyChecklists: [],
                    tasks: [
                        { id: 1, title: "Morning site inspection", time: "07:30", status: "completed" },
                        { id: 2, title: "Check material deliveries", time: "09:00", status: "completed" },
                        { id: 3, title: "Safety checklist", time: "10:00", status: "inprogress" },
                        { id: 4, title: "Lunch break", time: "12:00", status: "pending" },
                        { id: 5, title: "Community meeting notes", time: "14:00", status: "pending" },
                        { id: 6, title: "Submit daily report", time: "16:00", status: "pending" }
                    ],
                    deliveries: [
                        { id: 1, material: "Cement bags", quantity: 50, time: "Today 09:00", status: "delivered" },
                        { id: 2, material: "Drainage pipes", quantity: 100, time: "Today 11:00", status: "pending" },
                        { id: 3, material: "Gravel", quantity: 20, time: "Tomorrow 08:00", status: "scheduled" }
                    ],
                    feedback: [
                        { id: 1, person: "Ahmed Ibrahim", concern: "Access to house blocked", status: "resolved" },
                        { id: 2, person: "Island Council", concern: "Progress update requested", status: "pending" },
                        { id: 3, person: "Local Shop Owner", concern: "Dust control needed", status: "inprogress" }
                    ],
                    photos: [
                        { id: 1, title: "Site Progress - Day 45", emoji: "üèóÔ∏è", date: new Date().toISOString() },
                        { id: 2, title: "Drainage Work", emoji: "üõ†Ô∏è", date: new Date().toISOString() },
                        { id: 3, title: "Road Base Layer", emoji: "üõ£Ô∏è", date: new Date().toISOString() }
                    ]
                };
            }
            
            saveData();
        }
        
        function saveData() {
            localStorage.setItem('road_project_data', JSON.stringify(projectData));
        }
        
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
            
            // Update weather widget time
            document.querySelector('.weather-widget').innerHTML = `
                <div class="weather-icon">${getWeatherIcon()}</div>
                <div class="weather-details">
                    <div class="weather-temp">${getTemperature()}¬∞C</div>
                    <div class="weather-condition">${getWeatherCondition()}</div>
                </div>
                <div style="font-size: 12px; opacity: 0.8;">
                    Kanditheemu<br>${timeString}
                </div>
            `;
        }
        
        function getWeatherIcon() {
            const icons = ['‚òÄÔ∏è', '‚õÖ', 'üå§Ô∏è', 'üå•Ô∏è', '‚òÅÔ∏è'];
            return icons[Math.floor(Math.random() * icons.length)];
        }
        
        function getTemperature() {
            return Math.floor(Math.random() * 5) + 28; // 28-32¬∞C
        }
        
        function getWeatherCondition() {
            const conditions = [
                'Sunny - Good for work',
                'Partly cloudy - Normal work',
                'Light breeze - Good conditions',
                'Hot day - Extra water needed',
                'Clear skies - Perfect for work'
            ];
            return conditions[Math.floor(Math.random() * conditions.length)];
        }
        
        // =================== DASHBOARD FUNCTIONS ===================
        function loadDashboardData() {
            // Update stats
            document.getElementById('progress-value').textContent = projectData.project.progress + '%';
            document.getElementById('material-delivered').textContent = projectData.deliveries.filter(d => d.status === 'delivered').length;
            document.getElementById('safety-score').textContent = projectData.project.safetyScore + '%';
            document.getElementById('budget-used').textContent = projectData.project.budgetUsed + '%';
            
            // Load today's tasks
            const tasksContainer = document.getElementById('today-tasks');
            tasksContainer.innerHTML = '';
            
            projectData.tasks.forEach(task => {
                tasksContainer.innerHTML += `
                    <div class="list-item">
                        <div class="item-info">
                            <div class="item-title">${task.title}</div>
                            <div class="item-subtitle">${task.time}</div>
                        </div>
                        <div class="item-status status-${task.status}">${task.status}</div>
                    </div>
                `;
            });
            
            // Load upcoming deliveries
            const deliveriesContainer = document.getElementById('upcoming-deliveries');
            deliveriesContainer.innerHTML = '';
            
            projectData.deliveries.forEach(delivery => {
                deliveriesContainer.innerHTML += `
                    <div class="list-item">
                        <div class="item-info">
                            <div class="item-title">${delivery.material}</div>
                            <div class="item-subtitle">${delivery.quantity} units ‚Ä¢ ${delivery.time}</div>
                        </div>
                        <div class="item-status status-${delivery.status}">${delivery.status}</div>
                    </div>
                `;
            });
            
            // Load community feedback
            const feedbackContainer = document.getElementById('community-feedback');
            feedbackContainer.innerHTML = '';
            
            projectData.feedback.forEach(feedback => {
                feedbackContainer.innerHTML += `
                    <div class="list-item">
                        <div class="item-info">
                            <div class="item-title">${feedback.person}</div>
                            <div class="item-subtitle">${feedback.concern}</div>
                        </div>
                        <div class="item-status status-${feedback.status}">${feedback.status}</div>
                    </div>
                `;
            });
        }
        
        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            showToast(`Switched to ${tab} view`, 'info');
        }
        
        function switchSection(section) {
            currentSection = section;
            
            // Hide all sections
            document.getElementById('dashboard-content').style.display = 'none';
            document.getElementById('reports-content').style.display = 'none';
            document.getElementById('materials-content').style.display = 'none';
            document.getElementById('safety-content').style.display = 'none';
            document.getElementById('more-content').style.display = 'none';
            
            // Show selected section
            document.getElementById(section + '-content').style.display = 'block';
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Load section data
            switch(section) {
                case 'reports':
                    loadReportsData();
                    break;
                case 'materials':
                    loadMaterialsData();
                    break;
                case 'safety':
                    loadSafetyData();
                    break;
                case 'more':
                    loadMoreData();
                    break;
            }
            
            showToast(`Switched to ${section} section`, 'info');
        }
        
        // =================== SECTION DATA LOADING ===================
        function loadReportsData() {
            // Load reports list
            const reportsList = document.getElementById('reports-list');
            reportsList.innerHTML = '';
            
            projectData.dailyReports.slice(0, 5).forEach(report => {
                const date = new Date(report.date).toLocaleDateString();
                reportsList.innerHTML += `
                    <div class="report-item">
                        <div class="report-date">${date} - Daily Report</div>
                        <div class="report-content">${report.workCompleted.substring(0, 100)}...</div>
                    </div>
                `;
            });
            
            // Update progress bars
            document.getElementById('progress-percent').textContent = projectData.project.progress + '%';
            document.getElementById('progress-fill').style.width = projectData.project.progress + '%';
            document.getElementById('budget-percent').textContent = projectData.project.budgetUsed + '%';
            document.getElementById('safety-percent').textContent = projectData.project.safetyScore + '%';
        }
        
        function loadMaterialsData() {
            // Load materials table
            const tableBody = document.getElementById('materials-table-body');
            tableBody.innerHTML = '';
            
            projectData.materials.slice(0, 5).forEach(material => {
                const date = new Date(material.deliveryTime).toLocaleDateString();
                tableBody.innerHTML += `
                    <tr>
                        <td>${material.type}</td>
                        <td>${material.quantity} ${material.unit}</td>
                        <td><span class="item-status status-completed">Received</span></td>
                        <td>${date}</td>
                    </tr>
                `;
            });
            
            // Load delivery schedule
            const scheduleContainer = document.getElementById('delivery-schedule');
            scheduleContainer.innerHTML = '';
            
            projectData.deliveries.forEach(delivery => {
                scheduleContainer.innerHTML += `
                    <div class="list-item">
                        <div class="item-info">
                            <div class="item-title">${delivery.material}</div>
                            <div class="item-subtitle">${delivery.time}</div>
                        </div>
                        <div class="item-status status-${delivery.status}">${delivery.status}</div>
                    </div>
                `;
            });
        }
        
        function loadSafetyData() {
            // Update safety stats
            const today = new Date().toISOString().split('T')[0];
            const todayChecks = projectData.safetyChecks.filter(check => 
                new Date(check.time).toISOString().split('T')[0] === today
            ).length;
            
            document.getElementById('safety-checks-today').textContent = todayChecks;
            document.getElementById('safety-streak').textContent = projectData.project.safetyStreak;
            document.getElementById('safety-issues').textContent = projectData.feedback.filter(f => f.status !== 'resolved').length;
            document.getElementById('safety-trained').textContent = projectData.project.workersTrained;
            
            // Load safety checks
            const checksList = document.getElementById('safety-checks-list');
            checksList.innerHTML = '';
            
            projectData.safetyChecks.slice(0, 3).forEach(check => {
                const time = new Date(check.time).toLocaleString();
                checksList.innerHTML += `
                    <div class="list-item">
                        <div class="item-info">
                            <div class="item-title">Safety Check</div>
                            <div class="item-subtitle">${time}</div>
                        </div>
                        <div class="item-status status-completed">Completed</div>
                    </div>
                `;
            });
        }
        
        function loadMoreData() {
            // Already loaded via HTML
        }
        
        // =================== MODAL FUNCTIONS ===================
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal() {
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.classList.remove('active');
            });
        }
        
        function toggleCheck(element) {
            element.classList.toggle('checked');
            element.innerHTML = element.classList.contains('checked') ? '‚úì' : '';
        }
        
        // =================== DAILY REPORT ===================
        function openDailyReport() {
            openModal('daily-report-modal');
        }
        
        function saveDailyReport() {
            const report = {
                id: Date.now(),
                date: document.getElementById('report-date').value,
                weather: document.getElementById('weather-condition').value,
                workers: parseInt(document.getElementById('workers-present').value) || 0,
                workCompleted: document.getElementById('work-completed').value,
                materials: document.getElementById('materials-used').value,
                issues: document.getElementById('issues-reported').value,
                safety: document.getElementById('safety-observations').value,
                timestamp: new Date().toISOString()
            };
            
            projectData.dailyReports.unshift(report);
            
            // Update progress
            projectData.project.progress = Math.min(100, projectData.project.progress + 1);
            
            // Complete the daily report task
            const reportTask = projectData.tasks.find(t => t.title.includes('daily report'));
            if (reportTask) reportTask.status = 'completed';
            
            saveData();
            closeModal();
            loadDashboardData();
            showToast('üìù Daily report saved successfully!', 'success');
        }
        
        // =================== SAFETY CHECKLIST ===================
        function openSafetyCheck() {
            openModal('safety-checklist-modal');
        }
        
        function saveSafetyChecklist() {
            const safetyCheck = {
                id: Date.now(),
                time: document.getElementById('safety-check-time').value,
                notes: document.getElementById('safety-notes').value,
                completed: true,
                timestamp: new Date().toISOString()
            };
            
            projectData.safetyChecks.unshift(safetyCheck);
            
            // Update safety score and streak
            projectData.project.safetyScore = Math.min(100, projectData.project.safetyScore + 1);
            projectData.project.safetyStreak += 1;
            
            // Complete safety task
            const safetyTask = projectData.tasks.find(t => t.title.includes('Safety'));
            if (safetyTask) safetyTask.status = 'completed';
            
            saveData();
            closeModal();
            loadDashboardData();
            if (currentSection === 'safety') loadSafetyData();
            showToast('‚úÖ Safety checklist completed!', 'success');
        }
        
        // =================== MATERIAL TRACKING ===================
        function openMaterialTracking() {
            openModal('material-tracking-modal');
        }
        
        function saveMaterialDelivery() {
            const material = {
                id: Date.now(),
                type: document.getElementById('material-type').value,
                quantity: parseInt(document.getElementById('material-quantity').value) || 0,
                unit: document.getElementById('material-unit').value,
                supplier: document.getElementById('material-supplier').value,
                deliveryTime: document.getElementById('delivery-time').value,
                receivedBy: document.getElementById('received-by').value,
                quality: document.getElementById('material-quality').value,
                storage: document.getElementById('storage-location').value,
                notes: document.getElementById('material-notes').value,
                timestamp: new Date().toISOString()
            };
            
            projectData.materials.unshift(material);
            
            // Add to deliveries
            projectData.deliveries.unshift({
                id: Date.now(),
                material: material.type.charAt(0).toUpperCase() + material.type.slice(1),
                quantity: material.quantity,
                time: 'Delivered now',
                status: 'delivered'
            });
            
            // Complete material task
            const materialTask = projectData.tasks.find(t => t.title.includes('material'));
            if (materialTask) materialTask.status = 'completed';
            
            saveData();
            closeModal();
            loadDashboardData();
            if (currentSection === 'materials') loadMaterialsData();
            showToast('üì¶ Material delivery recorded!', 'success');
        }
        
        // =================== COMMUNITY NOTES ===================
        function openCommunityNotes() {
            openModal('community-notes-modal');
        }
        
        function saveCommunityNotes() {
            const note = {
                id: Date.now(),
                time: document.getElementById('community-meeting-time').value,
                person: document.getElementById('community-person').value,
                contactMethod: document.getElementById('contact-method').value,
                topic: document.getElementById('concern-topic').value,
                details: document.getElementById('discussion-details').value,
                action: document.getElementById('action-taken').value,
                followup: document.getElementById('followup-required').value,
                contact: document.getElementById('community-contact').value,
                timestamp: new Date().toISOString()
            };
            
            projectData.communityNotes.unshift(note);
            
            // Add to feedback
            projectData.feedback.unshift({
                id: Date.now(),
                person: note.person,
                concern: note.topic + ' - ' + note.details.substring(0, 50) + '...',
                status: 'pending'
            });
            
            // Complete community task
            const communityTask = projectData.tasks.find(t => t.title.includes('community'));
            if (communityTask) communityTask.status = 'completed';
            
            saveData();
            closeModal();
            loadDashboardData();
            showToast('üèùÔ∏è Community notes saved!', 'success');
        }
        
        // =================== MEETING NOTES ===================
        function openMeetingNotes() {
            openModal('meeting-notes-modal');
        }
        
        function saveMeetingNotes() {
            const meeting = {
                id: Date.now(),
                time: document.getElementById('meeting-time').value,
                type: document.getElementById('meeting-type').value,
                attendees: document.getElementById('meeting-attendees').value,
                discussion: document.getElementById('meeting-discussion').value,
                decisions: document.getElementById('meeting-decisions').value,
                nextMeeting: document.getElementById('next-meeting-date').value,
                timestamp: new Date().toISOString()
            };
            
            projectData.meetings.unshift(meeting);
            
            saveData();
            closeModal();
            showToast('ü§ù Meeting notes saved successfully!', 'success');
        }
        
        // =================== PROGRESS REPORT ===================
        function openProgressReport() {
            openModal('progress-report-modal');
        }
        
        function updateProgressValue(value) {
            document.getElementById('progress-display').textContent = value + '%';
        }
        
        function saveProgressReport() {
            const report = {
                id: Date.now(),
                period: document.getElementById('report-period').value,
                progress: parseInt(document.getElementById('progress-percentage').value),
                work: document.getElementById('period-work').value,
                challenges: document.getElementById('period-challenges').value,
                nextPlan: document.getElementById('next-period-plan').value,
                timestamp: new Date().toISOString()
            };
            
            projectData.progressReports.unshift(report);
            
            // Update project progress
            projectData.project.progress = report.progress;
            
            saveData();
            closeModal();
            loadDashboardData();
            showToast('üìä Progress report saved!', 'success');
        }
        
        // =================== WEATHER LOG ===================
        function openWeatherLog() {
            openModal('weather-log-modal');
        }
        
        function saveWeatherLog() {
            const log = {
                id: Date.now(),
                date: document.getElementById('weather-log-date').value,
                condition: document.getElementById('weather-log-condition').value,
                temperature: parseInt(document.getElementById('weather-temp').value) || 0,
                humidity: parseInt(document.getElementById('weather-humidity').value) || 0,
                wind: parseInt(document.getElementById('weather-wind').value) || 0,
                impact: document.getElementById('weather-impact').value,
                notes: document.getElementById('weather-notes').value,
                timestamp: new Date().toISOString()
            };
            
            projectData.weatherLogs.unshift(log);
            
            saveData();
            closeModal();
            showToast('üå§Ô∏è Weather log saved!', 'success');
        }
        
        // =================== DAILY CHECKLIST ===================
        function openDailyChecklist() {
            openModal('daily-checklist-modal');
        }
        
        function saveDailyChecklist() {
            const checklist = {
                id: Date.now(),
                date: document.getElementById('checklist-date').value,
                notes: document.getElementById('checklist-notes').value,
                completed: true,
                timestamp: new Date().toISOString()
            };
            
            projectData.dailyChecklists.unshift(checklist);
            
            saveData();
            closeModal();
            showToast('‚úÖ Daily checklist completed!', 'success');
        }
        
        // =================== PHOTO FUNCTIONS ===================
        function openSitePhotos() {
            // Show photo gallery
            const photoGrid = document.getElementById('recent-photos');
            photoGrid.innerHTML = '';
            
            projectData.photos.forEach(photo => {
                const date = new Date(photo.date).toLocaleDateString();
                photoGrid.innerHTML += `
                    <div class="photo-item" onclick="viewPhoto('${photo.title}', '${photo.emoji}')">
                        <div style="font-size: 32px;">${photo.emoji}</div>
                    </div>
                `;
            });
            
            // Add upload button
            photoGrid.innerHTML += `
                <div class="photo-item photo-add" onclick="uploadPhoto()">
                    <div style="font-size: 32px;">‚ûï</div>
                </div>
            `;
            
            showToast('üì∏ Photo gallery loaded', 'info');
        }
        
        function viewPhoto(title, emoji) {
            document.getElementById('viewer-image').src = '';
            document.getElementById('photo-caption').textContent = title + ' ' + emoji;
            document.getElementById('photo-viewer').classList.add('active');
        }
        
        function closePhotoViewer() {
            document.getElementById('photo-viewer').classList.remove('active');
        }
        
        function uploadPhoto() {
            // In a real app, this would use the device camera or file picker
            // For now, we'll simulate adding a photo
            const newPhoto = {
                id: Date.now(),
                title: "New Site Photo",
                emoji: "üì∑",
                date: new Date().toISOString()
            };
            
            projectData.photos.unshift(newPhoto);
            saveData();
            openSitePhotos();
            showToast('üì∏ Photo added to gallery!', 'success');
        }
        
        // =================== OTHER FUNCTIONS ===================
        function showAllTasks() {
            // Show all tasks in a modal or separate view
            let taskList = "üìã All Project Tasks:\n\n";
            projectData.tasks.forEach((task, index) => {
                taskList += `${index + 1}. ${task.title} (${task.time}) - ${task.status}\n`;
            });
            
            alert(taskList + "\nTotal: " + projectData.tasks.length + " tasks");
        }
        
        function openGallery() {
            openSitePhotos();
        }
        
        function openDeliverySchedule() {
            let schedule = "üöö Delivery Schedule:\n\n";
            projectData.deliveries.forEach(delivery => {
                schedule += `‚Ä¢ ${delivery.material}: ${delivery.quantity} units (${delivery.time}) - ${delivery.status}\n`;
            });
            
            alert(schedule);
        }
        
        function openCommunityPortal() {
            let feedback = "üèùÔ∏è Community Feedback Portal:\n\n";
            projectData.feedback.forEach(item => {
                feedback += `‚Ä¢ ${item.person}: ${item.concern} (${item.status})\n`;
            });
            
            alert(feedback + "\nTotal feedback items: " + projectData.feedback.length);
        }
        
        function viewAllSafetyChecks() {
            let checks = "üõ°Ô∏è Safety Check History:\n\n";
            projectData.safetyChecks.forEach((check, index) => {
                const date = new Date(check.time).toLocaleDateString();
                checks += `${index + 1}. ${date}: ${check.notes.substring(0, 50)}...\n`;
            });
            
            alert(checks + "\nTotal safety checks: " + projectData.safetyChecks.length);
        }
        
        function showDuas() {
            const duas = [
                "ÿ±Ÿéÿ®ŸêŸë ÿßÿ¥Ÿíÿ±Ÿéÿ≠Ÿí ŸÑŸêŸä ÿµŸéÿØŸíÿ±ŸêŸä ŸàŸéŸäŸéÿ≥ŸêŸëÿ±Ÿí ŸÑŸêŸä ÿ£ŸéŸÖŸíÿ±ŸêŸä",
                "O my Lord, expand for me my breast [with assurance] and ease for me my task",
                
                "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÑÿßŸé ÿ≥ŸéŸáŸíŸÑŸé ÿ•ŸêŸÑÿßŸéŸë ŸÖŸéÿß ÿ¨ŸéÿπŸéŸÑŸíÿ™ŸéŸáŸè ÿ≥ŸéŸáŸíŸÑÿßŸã ŸàŸéÿ£ŸéŸÜŸíÿ™Ÿé ÿ™Ÿéÿ¨ŸíÿπŸéŸÑŸè ÿßŸÑŸíÿ≠Ÿéÿ≤ŸíŸÜŸé ÿ≥ŸéŸáŸíŸÑÿßŸã ÿ•Ÿêÿ∞Ÿéÿß ÿ¥Ÿêÿ¶Ÿíÿ™Ÿé",
                "O Allah, there is no ease except in that which You have made easy, and You make the difficulty, if You wish, easy",
                
                "ÿ≠Ÿéÿ≥Ÿíÿ®ŸèŸÜŸéÿß ÿßŸÑŸÑŸéŸëŸáŸè ŸàŸéŸÜŸêÿπŸíŸÖŸé ÿßŸÑŸíŸàŸéŸÉŸêŸäŸÑŸè",
                "Sufficient for us is Allah, and [He is] the best Disposer of affairs"
            ];
            
            alert("ü§≤ Islamic Duas for Communication:\n\n" + 
                  duas[0] + "\n" + duas[1] + "\n\n" +
                  duas[2] + "\n" + duas[3] + "\n\n" +
                  duas[4] + "\n" + duas[5] + "\n\n" +
                  "May Allah make your interactions beneficial and blessed. ÿ¢ŸÖŸäŸÜ");
        }
        
        // =================== MORE SECTION FUNCTIONS ===================
        function exportData() {
            // Create a downloadable JSON file
            const dataStr = JSON.stringify(projectData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `kanditheemu-project-data-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('üì§ Data exported successfully!', 'success');
        }
        
        function backupData() {
            // Save to localStorage and show confirmation
            saveData();
            showToast('üíæ Data backed up successfully!', 'success');
        }
        
        function resetData() {
            if (confirm("‚ö†Ô∏è Are you sure you want to reset all data? This cannot be undone!")) {
                localStorage.removeItem('road_project_data');
                initializeApp();
                loadDashboardData();
                showToast('üîÑ Data reset complete!', 'success');
            }
        }
        
        function showSettings() {
            alert("‚öôÔ∏è Settings:\n\n‚Ä¢ Project: Kanditheemu Road Development\n‚Ä¢ Location: Kanditheemu Island\n‚Ä¢ Data stored locally in browser\n‚Ä¢ Works offline\n‚Ä¢ Auto-saves data");
        }
        
        function showHelp() {
            alert("‚ùì Help & Guide:\n\n1. Daily Report: Record daily work progress\n2. Material Tracking: Log material deliveries\n3. Safety Check: Complete safety inspections\n4. Community Notes: Record community interactions\n5. Photos: Document site progress\n6. Export: Download project data\n\nAll data is saved automatically!");
        }
        
        function showAbout() {
            alert("üèóÔ∏è Road Project Assistant v2.0\n\nDesigned for Kanditheemu Infrastructure Project\n\nFeatures:\n‚Ä¢ Daily progress tracking\n‚Ä¢ Material management\n‚Ä¢ Safety compliance\n‚Ä¢ Community engagement\n‚Ä¢ Photo documentation\n‚Ä¢ Offline capable\n‚Ä¢ Mobile-friendly");
        }
        
        function callContact(number) {
            if (confirm(`Call ${number}?`)) {
                showToast(`üìû Calling ${number}...`, 'info');
                // In a real app, this would use tel: link
                // window.location.href = `tel:${number}`;
            }
        }
        
        function generateMonthlyReport() {
            // Generate a simple monthly report
            const report = {
                month: new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),
                progress: projectData.project.progress + '%',
                safetyScore: projectData.project.safetyScore + '%',
                budgetUsed: projectData.project.budgetUsed + '%',
                dailyReports: projectData.dailyReports.length,
                materialsReceived: projectData.materials.length,
                safetyChecks: projectData.safetyChecks.length,
                communityInteractions: projectData.communityNotes.length
            };
            
            const reportText = `
üìä Monthly Project Report - ${report.month}

Project Progress: ${report.progress}
Safety Score: ${report.safetyScore}
Budget Utilization: ${report.budgetUsed}

Activities This Month:
‚Ä¢ ${report.dailyReports} daily reports submitted
‚Ä¢ ${report.materialsReceived} material deliveries recorded
‚Ä¢ ${report.safetyChecks} safety checks completed
‚Ä¢ ${report.communityInteractions} community interactions logged

Summary: Project progressing well with strong safety record.
            `;
            
            alert(reportText);
            showToast('üìä Monthly report generated!', 'success');
        }
        
        // =================== UTILITY FUNCTIONS ===================
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // =================== EXPORT FUNCTIONS TO WINDOW ===================
        window.switchTab = switchTab;
        window.switchSection = switchSection;
        window.openDailyReport = openDailyReport;
        window.openMaterialTracking = openMaterialTracking;
        window.openSafetyCheck = openSafetyCheck;
        window.openMeetingNotes = openMeetingNotes;
        window.openProgressReport = openProgressReport;
        window.openCommunityNotes = openCommunityNotes;
        window.openSitePhotos = openSitePhotos;
        window.openWeatherLog = openWeatherLog;
        window.openDailyChecklist = openDailyChecklist;
        window.showAllTasks = showAllTasks;
        window.openGallery = openGallery;
        window.openDeliverySchedule = openDeliverySchedule;
        window.openCommunityPortal = openCommunityPortal;
        window.viewPhoto = viewPhoto;
        window.uploadPhoto = uploadPhoto;
        window.toggleCheck = toggleCheck;
        window.saveDailyReport = saveDailyReport;
        window.saveSafetyChecklist = saveSafetyChecklist;
        window.saveMaterialDelivery = saveMaterialDelivery;
        window.saveCommunityNotes = saveCommunityNotes;
        window.saveMeetingNotes = saveMeetingNotes;
        window.saveProgressReport = saveProgressReport;
        window.saveWeatherLog = saveWeatherLog;
        window.saveDailyChecklist = saveDailyChecklist;
        window.showDuas = showDuas;
        window.closeModal = closeModal;
        window.closePhotoViewer = closePhotoViewer;
        window.viewAllSafetyChecks = viewAllSafetyChecks;
        window.exportData = exportData;
        window.backupData = backupData;
        window.resetData = resetData;
        window.showSettings = showSettings;
        window.showHelp = showHelp;
        window.showAbout = showAbout;
        window.callContact = callContact;
        window.generateMonthlyReport = generateMonthlyReport;
        window.updateProgressValue = updateProgressValue;
    </script>
</body>
</html>
